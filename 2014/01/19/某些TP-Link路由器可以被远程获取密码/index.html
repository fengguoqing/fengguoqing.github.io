<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>某些TP-Link路由器可以被远程获取密码 | Frank&#39;s Blog</title>
  <meta name="keywords" content=" 系统安全 ">
  <meta name="description" content="某些TP-Link路由器可以被远程获取密码 | Frank&#39;s Blog">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="description" content="Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troublesho">
<meta property="og:type" content="article">
<meta property="og:title" content="Hello World">
<meta property="og:url" content="https://fengguoqing.github.io/2017/11/25/hello-world/index.html">
<meta property="og:site_name" content="Frank&#39;s Blog">
<meta property="og:description" content="Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick">
<meta property="og:locale" content="zh-Hans">
<meta property="og:updated_time" content="2017-11-25T10:37:26.059Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Hello World">
<meta name="twitter:description" content="Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick">


<link rel="icon" href="/img/avatar.jpg">

<link rel="stylesheet" href="/css/style.css">

<link rel="stylesheet" href="/css/hl_theme/atom-light.css">

<link href="//cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.2/animate.min.css" rel="stylesheet">
<link href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
<script src="/js/jquery.autocomplete.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/highlight.min.js"></script>
<script>
    hljs.initHighlightingOnLoad();
</script>

<script src="//cdnjs.cloudflare.com/ajax/libs/nprogress/0.2.0/nprogress.min.js"></script>


</head>
<div style="display: none">
  <input class="theme_disqus_on" value="false">
  <input class="theme_preload_comment" value="false">
</div>
<body>
<aside class="nav">
    <div class="nav-left">
        <a href="/" class="avatar_target">
    <img class="avatar" src="/img/avatar.jpg" />
</a>
<div class="author">
    <span>Frank Feng</span>
</div>
<div class="icon">
    
    <a class="rss" title="rss" href="/atom.xml" target="_blank"></a>
    
    
    <a class="github" title="github" href="https://github.com/yelog" target="_blank"></a>
    
    
    <a class="facebook" title="facebook" href="https://www.facebook.com/faker.tops" target="_blank"></a>
    
    
    
    <a class="linkedin" title="linkedin" href="https://www.linkedin.com/in/%E7%8E%89%E6%9D%B0-%E6%9D%A8-13a40a103/" target="_blank"></a>
    
    
    
    <a class="reddit" title="reddit" href="https://www.reddit.com/user/yelog/" target="_blank"></a>
    
    
    <a class="weibo" title="weibo" href="http://weibo.com/u/2307534817" target="_blank"></a>
    
    
    <a class="email" title="email" href="mailto:jaytp@qq.com"></a>
    
</div>
<ul>
    <li class="all active">全部文章</li>
    
    <li data-rel="安全"> 安全 </li>
    
</ul>
<div class="left-bottom">
    <a class="about" href="/about">关于</a><a class="friends">友链</a>
</div>
<input type="hidden" id="yelog_site_posts_number" value="17">

<div style="display: none">
    <span id="busuanzi_value_site_uv"></span>
    <span id="busuanzi_value_site_pv"></span>
</div>
    </div>
    <div class="nav-right">
        <div class="friends-area">
    <div class="friends-title">
        友情链接
        <i class="back-title-list"></i>
    </div>
    <div class="friends-content">
        <ul>
            
            <li><a target="_blank" href="http://yelog.org/">叶落阁</a></li>
            
        </ul>
    </div>
</div>
        <div class="title-list">
    <form onkeydown="if(event.keyCode==13){return false;}">
        <input class="search" type="text" placeholder="Search..." autocomplete="off">
        <i class="cross"></i>
        <span>
        <label for="tagswitch">Tags:</label>
        <input id="tagswitch" type="checkbox">
    </span>
    </form>
    <div class="tags-list">
    
    <li class="article-tag-list-item">
        <a href="javascript:" class="color3">功耗</a>
    </li>
    
    <li class="article-tag-list-item">
        <a href="javascript:" class="color3">linux移植</a>
    </li>
    
    <li class="article-tag-list-item">
        <a href="javascript:" class="color5">日常记录</a>
    </li>
    
    <li class="article-tag-list-item">
        <a href="javascript:" class="color3">教程</a>
    </li>
    
    <li class="article-tag-list-item">
        <a href="javascript:" class="color3">linux CVE-2013-1763 漏洞</a>
    </li>
    
    <li class="article-tag-list-item">
        <a href="javascript:" class="color5">系统安全</a>
    </li>
    
    <li class="article-tag-list-item">
        <a href="javascript:" class="color5">Linux内核调试</a>
    </li>
    
    <div class="clearfix"></div>
</div>

    <nav>
        
        <a  class=""
           href="/2013/01/12/ACPI-DEBUG方法/"
           data-tag="功耗"
           data-author="" >
            <span class="post-title" title="ACPI DEBUG方法">ACPI DEBUG方法</span>
            <span class="post-date" title="2013-01-12 23:56:24">2013/01/12</span>
        </a>
        
        <a  class=""
           href="/2013/01/10/ACPI规范阅读笔记/"
           data-tag="功耗"
           data-author="" >
            <span class="post-title" title="ACPI规范阅读笔记">ACPI规范阅读笔记</span>
            <span class="post-date" title="2013-01-10 22:09:58">2013/01/10</span>
        </a>
        
        <a  class=""
           href="/2014/04/14/Linux-kernel-make-menuconfig-时出错处理方法/"
           data-tag="linux移植"
           data-author="" >
            <span class="post-title" title="Linux kernel make menuconfig 时出错处理方法">Linux kernel make menuconfig 时出错处理方法</span>
            <span class="post-date" title="2014-04-14 17:53:42">2014/04/14</span>
        </a>
        
        <a  class=""
           href="/2013/11/07/Ubuntu默认启动到文本界面/"
           data-tag="日常记录"
           data-author="" >
            <span class="post-title" title="Ubuntu默认启动到文本界面">Ubuntu默认启动到文本界面</span>
            <span class="post-date" title="2013-11-07 10:50:18">2013/11/07</span>
        </a>
        
        <a  class=""
           href="/2017/11/25/hello-world/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="Hello World">Hello World</span>
            <span class="post-date" title="2017-11-25 21:44:08">2017/11/25</span>
        </a>
        
        <a  class=""
           href="/2013/01/13/how-to-install-PostgreSQL-on-ubuntu/"
           data-tag="教程"
           data-author="" >
            <span class="post-title" title="how to install PostgreSQL on ubuntu">how to install PostgreSQL on ubuntu</span>
            <span class="post-date" title="2013-01-13 00:29:56">2013/01/13</span>
        </a>
        
        <a  class="安全 "
           href="/2016/09/04/linux-kernel-本地提权漏洞CVE-2013-1763-exploit-代码分析/"
           data-tag="linux CVE-2013-1763 漏洞"
           data-author="" >
            <span class="post-title" title="linux kernel 本地提权漏洞CVE-2013-1763 exploit 代码分析">linux kernel 本地提权漏洞CVE-2013-1763 exploit 代码分析</span>
            <span class="post-date" title="2016-09-04 20:52:20">2016/09/04</span>
        </a>
        
        <a  class=""
           href="/2013/01/12/mini2440基于uboot的TFTP下载教程/"
           data-tag="教程"
           data-author="" >
            <span class="post-title" title="mini2440基于uboot的TFTP下载教程">mini2440基于uboot的TFTP下载教程</span>
            <span class="post-date" title="2013-01-12 00:04:34">2013/01/12</span>
        </a>
        
        <a  class=""
           href="/2017/11/26/在ubuntu上安装redmine/"
           data-tag=""
           data-author="" >
            <span class="post-title" title=""></span>
            <span class="post-date" title="2017-11-26 09:54:36">2017/11/26</span>
        </a>
        
        <a  class=""
           href="/2013/11/02/基于linux-3-10的yaffs2移植/"
           data-tag="linux移植"
           data-author="" >
            <span class="post-title" title="基于linux 3.10的yaffs2移植">基于linux 3.10的yaffs2移植</span>
            <span class="post-date" title="2013-11-02 13:07:41">2013/11/02</span>
        </a>
        
        <a  class=""
           href="/2013/08/29/如何架设Git服务器/"
           data-tag="教程"
           data-author="" >
            <span class="post-title" title="如何架设Git服务器">如何架设Git服务器</span>
            <span class="post-date" title="2013-08-29 10:49:10">2013/08/29</span>
        </a>
        
        <a  class=""
           href="/2013/06/22/建立网站的一般步骤/"
           data-tag="教程"
           data-author="" >
            <span class="post-title" title="建立网站的一般步骤">建立网站的一般步骤</span>
            <span class="post-date" title="2013-06-22 20:22:22">2013/06/22</span>
        </a>
        
        <a  class=""
           href="/2014/01/19/某些TP-Link路由器可以被远程获取密码/"
           data-tag="系统安全"
           data-author="" >
            <span class="post-title" title="某些TP-Link路由器可以被远程获取密码">某些TP-Link路由器可以被远程获取密码</span>
            <span class="post-date" title="2014-01-19 17:59:38">2014/01/19</span>
        </a>
        
        <a  class=""
           href="/2013/12/02/生成和打上patch的方法/"
           data-tag="教程"
           data-author="" >
            <span class="post-title" title="生成和打上patch的方法">生成和打上patch的方法</span>
            <span class="post-date" title="2013-12-02 13:24:16">2013/12/02</span>
        </a>
        
        <a  class=""
           href="/2013/02/08/笔记本使用手机流量上网/"
           data-tag="教程"
           data-author="" >
            <span class="post-title" title="笔记本使用手机流量上网">笔记本使用手机流量上网</span>
            <span class="post-date" title="2013-02-08 23:22:49">2013/02/08</span>
        </a>
        
        <a  class=""
           href="/2014/02/15/解决三星手机WIFI“此网络不可用。证书已到期”方法/"
           data-tag="日常记录"
           data-author="" >
            <span class="post-title" title="解决三星手机WIFI“此网络不可用。证书已到期”方法">解决三星手机WIFI“此网络不可用。证书已到期”方法</span>
            <span class="post-date" title="2014-02-15 18:11:22">2014/02/15</span>
        </a>
        
        <a  class=""
           href="/2013/03/12/Linux内核调试方法总结/"
           data-tag="Linux内核调试"
           data-author="" >
            <span class="post-title" title="Linux内核调试方法总结">Linux内核调试方法总结</span>
            <span class="post-date" title="2013-03-12 16:25:59">2013/03/12</span>
        </a>
        
    </nav>
</div>
    </div>
    <div class="hide-list">
        <div class="semicircle">
            <div class="brackets first"><</div>
            <div class="brackets">&gt;</div>
        </div>
    </div>
</aside>
<div class="post">
    <div class="pjax">
        <article id="post-某些TP-Link路由器可以被远程获取密码" class="article article-type-post" itemscope itemprop="blogPost">
    
        <h1 class="article-title">某些TP-Link路由器可以被远程获取密码</h1>
    
    <div class="article-meta">
        
        
        
        
        <span class="tag">
            
            <a href="javascript:" class="color5">系统安全</a>
            
        </span>
        
    </div>
    <div class="article-meta">
        
        创建时间:<time class="date" title='更新时间: 2017-11-26 00:33:08'>2014-01-19 17:59</time>
        
    </div>
    <div class="article-meta">
        
        
        <span id="busuanzi_container_page_pv">
            阅读:<span id="busuanzi_value_page_pv">
                <span class="count-comment">
                    <span class="spinner">
                      <div class="cube1"></div>
                      <div class="cube2"></div>
                    </span>
                </span>
            </span>
        </span>
        
        
        <span class="top-comment" title="跳转至评论区">
            <a href="#comments">
                评论:<span class="count-comment">
                    <span class="spinner">
                      <div class="cube1"></div>
                      <div class="cube2"></div>
                    </span>
                </span>
            </a>
        </span>
        
    </div>
    
    <div class="toc-ref">
    
        <ol class="toc"><li class="toc-item toc-level-4"><a class="toc-link" href="#HOW-I-SAVED-YOUR-A-FROM-THE-ZYNOS-ROM-0-ATTACK-FULL-DISCLOSURE"><span class="toc-text">HOW I SAVED YOUR A** FROM THE ZYNOS (ROM-0) ATTACK !! ( FULL DISCLOSURE )</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Analysis"><span class="toc-text">Analysis :</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Prevention"><span class="toc-text">Prevention :</span></a>
    
<style>
    .left-col .switch-btn,
    .left-col .switch-area {
        display: none;
    }
    .toc-level-3 i,
    .toc-level-3 ol {
        display: none !important;
    }
</style>
</div>
    <div class="article-entry" itemprop="articleBody">
      
        <h4 id="HOW-I-SAVED-YOUR-A-FROM-THE-ZYNOS-ROM-0-ATTACK-FULL-DISCLOSURE"><a href="#HOW-I-SAVED-YOUR-A-FROM-THE-ZYNOS-ROM-0-ATTACK-FULL-DISCLOSURE" class="headerlink" title="HOW I SAVED YOUR A** FROM THE ZYNOS (ROM-0) ATTACK !! ( FULL DISCLOSURE )"></a>HOW I SAVED YOUR A** FROM THE ZYNOS (ROM-0) ATTACK !! ( FULL DISCLOSURE )</h4><p>Hello everyone, I just wanted to discuss some vulnerability I found and exploited for GOODNESS .. just so that SCRIPT KIDIES won’t attack your home/business network .</p>
<p>Well, in Algeria the main ISP ( Algerie Telecom ) provide you with a router when you pay for an internet plan. So you can conclude that every subscriber is using that router . TD-W8951ND is one of them, I did some ip scanning and I found that every router is using ZYXEL embedded firmware.</p>
<h3 id="Analysis"><a href="#Analysis" class="headerlink" title="Analysis :"></a><strong>Analysis :</strong></h3><p>Let’s download an update and take a look at it and try to find some vulnerabilities. ( <a href="http://www.tp-link.com/Resources/software/TD-W8951ND_V3.0_110729_FI.rar" target="_blank" rel="noopener">http://www.tp-link.com/Resources/software/TD-W8951ND_V3.0_110729_FI.rar </a>)</p>
<p><a href="http://static.oschina.net/uploads/img/201401/19175934_8zu4.jpg" target="_blank" rel="noopener"><img src="http://static.oschina.net/uploads/img/201401/19175934_qaNU.jpg" alt="lif" title="lif"></a></p>
<p>The ras file is in LIF format !! …<br>Hmmm let’s put that file for Binwalk test for God’s sake ! ( check :<a href="http://code.google.com/p/binwalk/wiki/Installation" target="_blank" rel="noopener">http://code.google.com/p/binwalk/wiki/Installation</a> for more informations on how to install it ).</p>
<p>This is what Binwalk told me about that file :<br><a href="http://static.oschina.net/uploads/img/201401/19175934_veKb.jpg" target="_blank" rel="noopener"><img src="http://static.oschina.net/uploads/img/201401/19175934_svCo.jpg" alt="zynos" title="zynos"></a></p>
<p>You can clearly see and confirm that the router is using zynos firmware. We can also see that there is two blocks of LZMA compressed data … let’s extract them and have a look.<br><a href="http://static.oschina.net/uploads/img/201401/19175935_0q2n.jpg" target="_blank" rel="noopener"><img src="http://static.oschina.net/uploads/img/201401/19175935_6pIO.jpg" alt="extract1" title="extract1"></a></p>
<p>The problem is that when I tried to decompress the two blocks I get an error : ” Compressed data is corrupt “</p>
<p><a href="http://static.oschina.net/uploads/img/201401/19175935_xf7b.jpg" target="_blank" rel="noopener"><img src="http://static.oschina.net/uploads/img/201401/19175935_U9nN.jpg" alt="error" title="error"></a></p>
<p>Hmm, first the “ras” file was in LIF format .. and now the lzma compress blocks are corrupted !!<br>I googled this and tried to find a solution for this, <strong>FOUND NOTHING</strong> . How am I going to solve this ??<br>One idea came in my mind .. “Strings” command and here is what I got :</p>
<p><a href="http://static.oschina.net/uploads/img/201401/19175935_cqNB.jpg" target="_blank" rel="noopener"><img src="http://static.oschina.net/uploads/img/201401/19175936_vM18.jpg" alt="strings" title="strings"></a></p>
<p>Aaaah ! so the blocks aren’t compressed with LZMA or anything ! and the whole “ras” firmware file is just big chunk of data in clear text.<br>Ok, let’s try and find some useful STRINGS …</p>
<p>After some time searching “I” didn’t find the useful thing that will help us find vulnerabilities on the firmware !!</p>
<p>I didn’t give up …<br>I just was thinking and questioning :</p>
<ul>
<li><p>Me: What do you want from this firmware file !</p>
</li>
<li><p>Me: I want to find remote vulnerabilities that will help me extract the “admin” password.</p>
</li>
<li><p>Me: Does the web interface let you save the current configuration ? </p>
</li>
</ul>
<p><a href="http://static.oschina.net/uploads/img/201401/19175936_Jez1.jpg" target="_blank" rel="noopener"><img src="http://static.oschina.net/uploads/img/201401/19175936_PIlE.jpg" alt="rom-save" title="rom-save"></a></p>
<ul>
<li><p>Me: yes !!</p>
</li>
<li><p>Me: Is the page password protected ? </p>
</li>
</ul>
<p><a href="http://static.oschina.net/uploads/img/201401/19175936_T61n.jpg" target="_blank" rel="noopener"><img src="http://static.oschina.net/uploads/img/201401/19175936_ypc5.jpg" alt="password-protected" title="password-protected"></a></p>
<ul>
<li>Me: No !!! I tired to access that page on a different IP and it didn’t require a passowrd ! </li>
</ul>
<p>Ok, enough questions haha ..</p>
<p>Now, when I activated TamperData and clicked “ROMFILE SAVE”&#160; I’ve found out that the rom-0 file is located on “IP/rom-0″ and the directory isn’t password protected or anything.</p>
<p>So we are able to download the configuration file which contains the “admin” password. I took a look at rom-0 file and couldn’t figure out how to reverse-engineer it, and when you don’t know something it’s not a shame to ask for help .. and that’s what I did !<br>I contacted “<strong>Craig</strong>” from <a href="http://devttys0.com/" target="_blank" rel="noopener">devttys0.com</a>, he is an expect when it comes to hacking embdded devices . He’s a great guy and he replied to my email and pointed me to <a href="http://50.57.229.26/zynos.php" target="_blank" rel="noopener">http://50.57.229.26/zynos.php</a>which is a free rom-0 file decompressor .</p>
<p><a href="http://static.oschina.net/uploads/img/201401/19175937_whRc.jpg" target="_blank" rel="noopener"><img src="http://static.oschina.net/uploads/img/201401/19175937_NJ9G.jpg" alt="decompress" title="decompress"></a></p>
<p>When you upload and submit the rom-0 file there, the php page replies back with the configuration in clear text ( <strong>INCLUDING THE PASSWORD</strong> ) .</p>
<p>So what i need to do now is to automate the process of :</p>
<ul>
<li><p>Download rom-0 file.</p>
</li>
<li><p>Upload it to <a href="http://50.57.229.26/zynos.php" target="_blank" rel="noopener">http://50.57.229.26/zynos.php</a></p>
</li>
<li><p>get the repy back and extract the admin password from it.</p>
</li>
<li><p>loop this process to a range of ip addresses. </p>
</li>
</ul>
<p>And that’s exactly what I did, I opened an OLD OLD poc python script of mine that accessed routers via telnet using the default passwords. So what I just need to do now is to add some functionality to it.</p>
<p>Well I thought about&#160; this, and I’m posting this script online <strong>ONLY FOR EDUCATIONAL PURPOSES.</strong></p>
<p>You can find the scripts here : <a href="https://github.com/MrNasro/zynos-attacker/" target="_blank" rel="noopener">https://github.com/MrNasro/zynos-attacker/</a></p>
<p>Demo :</p>
<p><a href="http://static.oschina.net/uploads/img/201401/19175937_xoJZ.jpg" target="_blank" rel="noopener"><img src="http://static.oschina.net/uploads/img/201401/19175937_vATX.jpg" alt="demo" title="demo"></a></p>
<p><strong>PS : I OWN ALL THE IP RANGE I WAS SCANNING ” FOR SURE <img src="http://static.oschina.net/uploads/img/201401/19180126_0Zrk.gif" alt=";)"> “</strong></p>
<h3 id="Prevention"><a href="#Prevention" class="headerlink" title="Prevention :"></a>Prevention :</h3><p>Now ! how do you prevent attackers from downloading your rom-0 configuration file and manipulating your router ? This is pretty simple if you think about it ..<br>You just have to forward port 80 on the router to and inused IP address on your network :<br><a href="http://static.oschina.net/uploads/img/201401/19175937_XPrm.jpg" target="_blank" rel="noopener"><img src="http://static.oschina.net/uploads/img/201401/19175938_gdlc.jpg" alt="forward" title="forward"></a></p>
<p><strong>THATS ALL, </strong>or if you want to play a little with attackers that are using scripts too .. just forward port 80 to you local http server and put a LARGE file in the root directory and name it rom-0 .. just let them download like 1GB rom-0 file haha haha .. I have also automated the process of port forwarding and I’m running the scripts daily just to prevent hackers from attacking weak users …</p>
<p>In the next post I’ll demonstrate how would a malicious hacker exploit this to hack TONS of networks and get a meterpreter/reverse_shell on every PC on the target network ..</p>
<p>Hope you enjoyed this analysis, if you have anything to add or any questions to ask don’t hesitate to contact me ! <strong>BE THEIR HERO, HAPPY HACKING <img src="http://static.oschina.net/uploads/img/201401/19180126_0Zrk.gif" alt=";)"></strong></p>

      
       <hr><span style="font-style: italic;"> 转载请注明来源，欢迎对文章中的引用来源进行考证，欢迎指出任何有错误或不够清晰的表达。可以在下面评论区评论，也可以邮件至 jaytp@qq.com </span>
    </div>
</article>


<p>
    <a href="javascript:void(0)" class="dashang" onclick="dashangToggle()">赏</a>
</p>


<div class="article_copyright">
    <p><span>文章标题:</span>某些TP-Link路由器可以被远程获取密码</p>
    
    <p><span>本文作者:</span><a href="javascript:void(0)" title="Frank Feng">Frank Feng</a></p>
    <p><span>发布时间:</span>2014-01-19, 17:59:38</p>
    <p><span>最后更新:</span>2017-11-26, 00:33:08</p>
    <span>原始链接:</span><a class="post-url" href="/2014/01/19/某些TP-Link路由器可以被远程获取密码/" title="某些TP-Link路由器可以被远程获取密码">https://fengguoqing.github.io/2014/01/19/某些TP-Link路由器可以被远程获取密码/</a>
    <p>
        <span>版权声明:</span><i class="fa fa-creative-commons"></i> <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" title="CC BY-NC-SA 4.0 International" target = "_blank">"署名-非商用-相同方式共享 4.0"</a> 转载请保留原文链接及作者。
    </p>
</div>


    
        <div id="comments"></div>
<link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">

<script src="/js/gitalk.js"></script>
<script type="text/javascript">
    var gitalk = new Gitalk({
        clientID: 'dc7f8ca729fea878e59c',
        clientSecret: '67417ddbb12eeebb0de47187099e92ace7bdf90e',
        repo: 'yelog.github.io',
        owner: 'yelog',
        admin: ['yelog'],
        id: location.pathname,
        distractionFreeMode: 'true',
        language: 'zh-CN',
        perPage: parseInt('10',10)
    })
gitalk.render('comments')
</script>
    



    

    </div>
    <div class="copyright">
        <p class="footer-entry">©2017 Yelog</p>
<p class="footer-entry">Buit with <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/yelog/hexo-theme-3-hexo" target="_blank">3-hexo</a> theme</p>

    </div>
    <div class="full-toc">
        <button class="full"><span class="min "></span></button>
<button class="post-toc-menu"><span class="post-toc-menu-icons"></span></button>
<div class="post-toc"><span class="post-toc-title">目录</span>
    <div class="post-toc-content">

    </div>
</div>
<a class="" id="rocket" href="javascript:void(0)"></a>
    </div>
</div>
<div class="acParent"></div>
<div class="hide_box" onclick="dashangToggle()"></div>
<div class="shang_box">
    <a class="shang_close" href="javascript:void(0)" onclick="dashangToggle()">×</a>
    <div class="shang_tit">
        <p>喜欢就点赞,疼爱就打赏</p>
    </div>
    <div class="shang_payimg">
        <div class="pay_img">
            <img src="/img/alipay.jpg" class="alipay" title="扫码支持">
            <img src="/img/weixin.jpg" class="weixin" title="扫码支持">
        </div>
    </div>
    <div class="shang_payselect">
        <span><label><input type="radio" name="pay" checked value="alipay">支付宝</label></span><span><label><input type="radio" name="pay" value="weixin">微信</label></span>
    </div>
</div>
</body>
<script src="//cdnjs.cloudflare.com/ajax/libs/jquery.pjax/1.9.6/jquery.pjax.min.js"></script>
<script src="/js/script.js"></script>
<script>
    /*作者、标签的自动补全*/
    $(function () {
        $('.search').AutoComplete({
            'data': ['#功耗','#linux移植','#日常记录','#教程','#linux CVE-2013-1763 漏洞','#系统安全','#Linux内核调试',],
            'itemHeight': 20,
            'width': 418
        }).AutoComplete('show');
    })
    function initArticle() {
        /*渲染对应的表格样式*/
        
            $(".post .pjax table").addClass("green_title");
        

        /*渲染打赏样式*/
        
        $("input[name=pay]").on("click", function () {
            if($("input[name=pay]:checked").val()=="weixin"){
                $(".shang_box .shang_payimg .pay_img").addClass("weixin_img");
            } else {
                $(".shang_box .shang_payimg .pay_img").removeClass("weixin_img");
            }
        })
        

        /*高亮代码块行号*/
        
        $('pre code').each(function(){
            var lines = $(this).text().split('\n').length - 1;
            var $numbering = $('<ul/>').addClass('pre-numbering').attr("unselectable","on");
            $(this).addClass('has-numbering')
                    .parent()
                    .append($numbering);
            for(i=1;i<=lines;i++){
                $numbering.append($('<li/>').text(i));
            }
        });
        

        /*访问数量*/
        
        $.getScript("//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js");
        

        /*代码高亮，行号对齐*/
        $('.pre-numbering').css('line-height',$('.has-numbering').css('line-height'));
    }

    /*打赏页面隐藏与展示*/
    
    function dashangToggle() {
        $(".shang_box").fadeToggle();
        $(".hide_box").fadeToggle();
    }
    
</script>

<!--加入行号的高亮代码块样式-->

<style>
    pre{
        position: relative;
        margin-bottom: 24px;
        border-radius: 10px;
        border: 2px solid #e2dede;
        background: #FFF;
        overflow: hidden;
    }
    code.has-numbering{
        margin-left: 30px;
    }
    .pre-numbering{
        margin: 0px;
        position: absolute;
        top: 0;
        left: 0;
        width: 20px;
        padding: 0.5em 3px 0.7em 5px;
        border-right: 1px solid #C3CCD0;
        text-align: right;
        color: #AAA;
        background-color: #fafafa;
    }
</style>

<!--自定义样式设置-->
<style>
    
    .nav-right nav a.hover{
        background-color: #e2e0e0;
    }
    
    

    /*列表样式*/
    
    .post .pjax article .article-entry>ol, .post .pjax article .article-entry>ul, .post .pjax article>ol, .post .pjax article>ul{
        border: #e2dede solid 2px;
        border-radius: 10px;
        padding: 10px 32px 10px 56px;
    }
    .post .pjax article .article-entry li>ol, .post .pjax article .article-entry li>ul,.post .pjax article li>ol, .post .pjax article li>ul{
        padding-top: 5px;
        padding-bottom: 5px;
    }
    .post .pjax article .article-entry>ol>li, .post .pjax article .article-entry>ul>li,.post .pjax article>ol>li, .post .pjax article>ul>li{
        margin-bottom: auto;
        margin-left: auto;
    }
    .post .pjax article .article-entry li>ol>li, .post .pjax article .article-entry li>ul>li,.post .pjax article li>ol>li, .post .pjax article li>ul>li{
        margin-bottom: auto;
        margin-left: auto;
    }
    

    /*引用块样式*/
    
    .post .pjax article blockquote {
        padding: 10px 20px;
        background-color: white;
        border: none;
        border-left: 4px solid #42b983;
        border-right: 4px solid #42b983;
        border-radius: 10px;
    }
    

    /*文章列表背景图*/
    
    .nav-right:before {
        content: ' ';
        display: block;
        position: absolute;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        opacity: 0.1;
        background: url("http://oncj6b2vl.bkt.clouddn.com/FlSExUGfRSaqxkK5v42CpuI-tXAL.jpg");
        background-repeat: no-repeat;
        background-position: 50% 0;
        -ms-background-size: cover;
        -o-background-size: cover;
        -moz-background-size: cover;
        -webkit-background-size: cover;
        background-size: cover;
    }
    
</style>
</html>
