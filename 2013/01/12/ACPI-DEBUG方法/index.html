<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>ACPI DEBUG方法 | Frank&#39;s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="获取ACPI TABLE的方法   1. 首先要安装acpidump和iasl命令。 $ sudo apt-get install acpidump $ sudo apt-get install iasl $ sudo apt-get install pmtools 有的机器上需要安装pmtools才可以。   2. ">
<meta name="keywords" content="功耗">
<meta property="og:type" content="article">
<meta property="og:title" content="ACPI DEBUG方法">
<meta property="og:url" content="https://fengguoqing.github.io/2013/01/12/ACPI-DEBUG方法/index.html">
<meta property="og:site_name" content="Frank&#39;s Blog">
<meta property="og:description" content="获取ACPI TABLE的方法   1. 首先要安装acpidump和iasl命令。 $ sudo apt-get install acpidump $ sudo apt-get install iasl $ sudo apt-get install pmtools 有的机器上需要安装pmtools才可以。   2. 导出ACPI的数据。 $ sudo cat /proc/acpi/dsdt &amp;">
<meta property="og:updated_time" content="2017-11-25T10:41:07.679Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="ACPI DEBUG方法">
<meta name="twitter:description" content="获取ACPI TABLE的方法   1. 首先要安装acpidump和iasl命令。 $ sudo apt-get install acpidump $ sudo apt-get install iasl $ sudo apt-get install pmtools 有的机器上需要安装pmtools才可以。   2. 导出ACPI的数据。 $ sudo cat /proc/acpi/dsdt &amp;">
  
    <link rel="alternate" href="/atom.xml" title="Frank&#39;s Blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Frank&#39;s Blog</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://fengguoqing.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-ACPI-DEBUG方法" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2013/01/12/ACPI-DEBUG方法/" class="article-date">
  <time datetime="2013-01-12T15:56:24.000Z" itemprop="datePublished">2013-01-12</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      ACPI DEBUG方法
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p> <strong>获取ACPI TABLE的方法<span></span></strong> </p>
<p> 1. 首先要安装acpidump和iasl命令。<br> $ sudo apt-get install acpidump<br> $ sudo apt-get install iasl<br> $ sudo apt-get install pmtools<br> 有的机器上需要安装pmtools才可以。 </p>
<p> 2. 导出ACPI的数据。<br> $ sudo cat /proc/acpi/dsdt &gt; dstd.dat<br> 或者<br> $ sudo cat /sys/firmware/acpi/tables/DSDT &gt; /tmp/dsdt.dat<br> 如果找不到该文件可以使用下面的命令：<br> $ sudo acpidump &gt; acpi.dat </p>
<p> 3. 分离各表格数据，会生成多个数据文件。<br> $ acpixtract -a acpi.dat<br> Acpi table [DSDT] -&nbsp; 41555 bytes written to DSDT.dat<br> Acpi table [FACS] -&nbsp;&nbsp;&nbsp;&nbsp; 64 bytes written to FACS.dat<br> Acpi table [FACP] -&nbsp;&nbsp;&nbsp; 116 bytes written to FACP.dat<br> Acpi table [APIC] -&nbsp;&nbsp;&nbsp; 132 bytes written to APIC.dat<br> Acpi table [ASF!] -&nbsp;&nbsp;&nbsp;&nbsp; 99 bytes written to ASF!.dat<br> Acpi table [MCFG] -&nbsp;&nbsp;&nbsp;&nbsp; 60 bytes written to MCFG.dat<br> Acpi table [TCPA] -&nbsp;&nbsp;&nbsp;&nbsp; 50 bytes written to TCPA.dat<br> Acpi table [SLIC] -&nbsp;&nbsp;&nbsp; 374 bytes written to SLIC.dat<br> Acpi table [HPET] -&nbsp;&nbsp;&nbsp;&nbsp; 56 bytes written to HPET.dat<br> Acpi table [DMAR] -&nbsp;&nbsp;&nbsp; 456 bytes written to DMAR.dat<br> Acpi table [RSDT] -&nbsp;&nbsp;&nbsp;&nbsp; 68 bytes written to RSDT.dat<br> Acpi table [RSDP] -&nbsp;&nbsp;&nbsp;&nbsp; 20 bytes written to RSDP.dat </p>
<p> 4. 反汇编DSDT.dat，<br> $ iasl -d DSDT.dat<br> Intel ACPI Component Architecture<br> AML Disassembler version 20100528 [Oct 15 2010]<br> Copyright (c) 2000 - 2010 Intel Corporation<br> Supports ACPI Specification Revision 4.0a<br> Loading Acpi table from file DSDT.dat<br> Acpi table [DSDT] successfully installed and loaded<br> Pass 1 parse of [DSDT]<br> Pass 2 parse of [DSDT]<br> Parsing Deferred Opcodes (Methods/Buffers/Packages/Regions)<br> ……………………………………………………………………………………………………………………………………………………………………………………………………………………………………………………………………………………………………………………………………………………………………………………………………………………………..<br> Parsing completed<br> Disassembly completed, written to “DSDT.dsl” </p>
<p> 5. 根据需要修改DSDT.dsl文件，然后重新编译该文件，会生成DSDT.aml和DSDT.hex两个文件。<br> $ iasl -tc dsdt.dsl<br> Intel ACPI Component Architecture<br> ASL Optimizing Compiler version 20100528 [Oct 15 2010]<br> Copyright (c) 2000 - 2010 Intel Corporation<br> Supports ACPI Specification Revision 4.0a<br> ………………………………………………<br> ASL Input:&nbsp; DSDT.dsl - 8762 lines, 320704 bytes, 3778 keywords<br> AML Output: DSDT.aml - 39328 bytes, 780 named objects, 2998 executable opcodes<br> Compilation complete. 0 Errors, 41 Warnings, 0 Remarks, 988 Optimizations </p>
<p> 6. 更新DSDT的方法。<br> 其一(没有测试过，不知道能否成功):<br> 使用新的dsdt.aml代替BIOS中的版本:<br> &nbsp;&nbsp;&nbsp; cp /boot/initrd.img-2.6.20-16-generic /boot/initrd.img-2.6.20-16-generic-bak<br> &nbsp;&nbsp;&nbsp; sudo cp dsdt.aml /etc/initramfs-tools/DSDT.aml<br> &nbsp;&nbsp;&nbsp; sudo update-initramfs -u -k all<br> 其二（需要安装acpiexec，为找到）：<br> iasl -sa DSDT.dsl&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # e.g. recompile a modified, disassembled DSDT for<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; initramfs inclusion (see later)<br> acpiexec DSDT.dat&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # parse, interpret and load a DSDT in userspace<br> 其三：<br> 这个方法需要重新编译内核。<br> 首先将DSDT.hex文件复制到内核源码的include目录下。<br> $ cp DSDT.hex $SRC/include/<br> 然后修改内核配置文件.config<br> &nbsp;&nbsp;&nbsp; CONFIG_STANDALONE=n<br> &nbsp;&nbsp;&nbsp; CONFIG_ACPI_CUSTOM_DSDT=y<br> &nbsp;&nbsp;&nbsp; CONFIG_ACPI_CUSTOM_DSDT_FILE=”DSDT.hex”<br> 重新编译，更新内核，然后启动，可以在dmesg中看到<br> [&nbsp;&nbsp;&nbsp; 0.000000] ACPI: Override [DSDT- CDV-TPT], this is unsafe: tainting kernel<br> [&nbsp;&nbsp;&nbsp; 0.000000] Disabling lock debugging due to kernel taint<br> [&nbsp;&nbsp;&nbsp; 0.000000] ACPI: DSDT @ 0x7f378010 Table override, replaced with:<br> [&nbsp;&nbsp;&nbsp; 0.000000] ACPI: DSDT c0f0f140 0703F (v02&nbsp; Intel&nbsp; CDV-TPT 00000000 INTL 20091214)<br> 就说明DSDT已经被替换成修改过的了。 </p>
<p> 7. 在DSDT中添加LOG。<br> 首先应该打开CONFIG_ACPI_DEBUG=y。<br> acpi.debug_level= ACPI_LV_DEBUG_OBJECT，<br> acpi.debug_layer= ACPI_TABLES | ACPI_NAMESPACE，<br> 使用将想要的变量或者字符串赋值给Debug即可。<br> (Store (AAAA, Debug) </p>
<p> 下面附上原文：<br> Dumping ACPI tables using acpidump and acpixtract<br> Most of the time when I’m looking at BIOS issues I just look at the disassembled ACPI DSDT using the following runes:<br> $ sudo cat /proc/acpi/dsdt &gt; dstd.dat<br> $ iasl -d dstd.dat<br> ..and look at the disassembly in dstd.dsl<br> Some BIOS bugs need a little more examination, and that’s where I use acpidump + acpixtract. The simplest way to dump all the ACPI tables is as follows:<br> $ sudo acpidump &gt; acpi.dat<br> $ acpixtract -a acpi.dat<br> Acpi table [DSDT] - 24564 bytes written to DSDT.dat<br> Acpi table [FACS] - 64 bytes written to FACS.dat<br> Acpi table [FACP] - 244 bytes written to FACP1.dat<br> Acpi table [APIC] - 104 bytes written to APIC1.dat<br> Acpi table [HPET] - 56 bytes written to HPET.dat<br> Acpi table [MCFG] - 60 bytes written to MCFG.dat<br> Acpi table [TCPA] - 50 bytes written to TCPA.dat<br> Acpi table [TMOR] - 38 bytes written to TMOR.dat<br> Acpi table [SLIC] - 374 bytes written to SLIC.dat<br> Acpi table [APIC] - 104 bytes written to APIC2.dat<br> Acpi table [BOOT] - 40 bytes written to BOOT.dat<br> Acpi table [SSDT] - 685 bytes written to SSDT1.dat<br> Acpi table [SSDT] - 163 bytes written to SSDT2.dat<br> Acpi table [SSDT] - 607 bytes written to SSDT3.dat<br> Acpi table [SSDT] - 166 bytes written to SSDT4.dat<br> Acpi table [SSDT] - 1254 bytes written to SSDT5.dat<br> Acpi table [XSDT] - 148 bytes written to XSDT.dat<br> Acpi table [FACP] - 116 bytes written to FACP2.dat<br> Acpi table [RSDT] - 88 bytes written to RSDT.dat<br> Acpi table [RSDP] - 36 bytes written to RSDP.dat<br> ..this dumps out all the tables into files.<br> One can the disassemble the required file using iasl, e.g.:<br> $ iasl -d APIC1.dat<br> or decode the table using madt:<br> $ madt &lt; ACPI1.dsl<br> ACPI: APIC (v001 INTEL CRESTLNE 0x06040000 LOHR 0x0000005a) @ 0x(nil)<br> ACPI: LAPIC (acpi_id[0x00] lapic_id[0x00] enabled)<br> ACPI: LAPIC (acpi_id[0x01] lapic_id[0x01] enabled)<br> ACPI: IOAPIC (id[0x01] address[0xfec00000] global_irq_base[0x0])<br> ACPI: INT_SRC_OVR (bus 0 bus_irq 0 global_irq 2 dfl dfl)<br> ACPI: INT_SRC_OVR (bus 0 bus_irq 9 global_irq 9 high level)<br> ACPI: LAPIC_NMI (acpi_id[0x00] high edge lint[0x1])<br> ACPI: LAPIC_NMI (acpi_id[0x01] high edge lint[0x1])<br> Length 104 OK<br> Checksum OK<br> Or to just get one particular table, I use:<br> $ sudo acpidump -t SSDT &gt; SSDT.dat<br> $ acpixtract -a SSDT.dat<br> $ iasl -d SSDT.dat<br> Intel ACPI Component Architecture<br> AML Disassembler version 20090521 [Jun 30 2009]<br> Copyright (C) 2000 - 2009 Intel Corporation<br> Supports ACPI Specification Revision 3.0a<br> Loading Acpi table from file SSDT.dat<br> Acpi table [SSDT] successfully installed and loaded<br> Pass 1 parse of [SSDT]<br> Pass 2 parse of [SSDT]<br> Parsing Deferred Opcodes (Methods/Buffers/Packages/Regions)<br> ………<br> Parsing completed<br> Disassembly completed, written to “SSDT.dsl”<br> Armed with a copy of the ACPI spec, one can then start digging into why there are weird Linux/BIOS interactions occurring.<br> How to Build a custom DSDT into the kernel<br> &nbsp;&nbsp;&nbsp; Get original DSDT:<br> &nbsp;&nbsp;&nbsp; # cp /proc/acpi/dsdt DSDT<br> &nbsp;&nbsp;&nbsp; or<br> &nbsp;&nbsp;&nbsp; # acpidump &gt; acpidump.out<br> &nbsp;&nbsp;&nbsp; $ acpixtract DSDT acpidump &gt; DSDT.dat<br> &nbsp;&nbsp;&nbsp; Disassemble it<br> &nbsp;&nbsp;&nbsp; $ iasl -d DSDT.dat<br> &nbsp;&nbsp;&nbsp; Make your changes:<br> &nbsp;&nbsp;&nbsp; $ vi DSDT.dsl<br> &nbsp;&nbsp;&nbsp; Build it:<br> &nbsp;&nbsp;&nbsp; $ iasl -tc DSDT.dsl<br> &nbsp;&nbsp;&nbsp; Put it where the kernel build can include it:<br> &nbsp;&nbsp;&nbsp; $ cp DSDT.hex $SRC/include/<br> &nbsp;&nbsp;&nbsp; Add this to the kernel .config:<br> &nbsp;&nbsp;&nbsp; CONFIG_STANDALONE=n<br> &nbsp;&nbsp;&nbsp; CONFIG_ACPI_CUSTOM_DSDT=y<br> &nbsp;&nbsp;&nbsp; CONFIG_ACPI_CUSTOM_DSDT_FILE=”DSDT.hex”<br> &nbsp;&nbsp;&nbsp; Make the kernel and off you go!<br> &nbsp;&nbsp;&nbsp; You should see in dmesg:<br> &nbsp;&nbsp;&nbsp; Table [DSDT] replaced by host OS </p>
<p><div><br> <strong>Linux ACPI Custom Control Method How To</strong><br></div> Written by Zhang Rui &lt;rui.zhang@intel.com&gt; </p>
<p> Linux supports customizing ACPI control methods at runtime. </p>
<p> Users can use this to </p>
<p> 1. override an existing method which may not work correctly, or just for debugging purposes. </p>
<p> 2. insert a completely new method in order to create a missing method such as _OFF, _ON, _STA, _INI, etc. For these cases, it is far simpler to dynamically install a single control method rather than override the entire DSDT, because kernel rebuild/reboot is not needed and test result can be got in minutes. </p>
<p> Note: Only ACPI METHOD can be overridden, any other object types like “Device”, “OperationRegion”, are not recognized. Note: The same ACPI control method can be overridden for many times, and it’s always the latest one that used by Linux/kernel. Note: To get the ACPI debug object output (Store (AAAA, Debug)), please run “echo 1 &gt; /sys/module/acpi/parameters/aml_debug_output”. </p>
<p> 1. override an existing method a) get the ACPI table via ACPI sysfs I/F. e.g. to get the DSDT, just run “cat /sys/firmware/acpi/tables/DSDT &gt; /tmp/dsdt.dat” b) disassemble the table by running “iasl -d dsdt.dat”. </p>
<p> &nbsp;&nbsp; c) rewrite the ASL code of the method and save it in a new file, </p>
<p> &nbsp;&nbsp; d) package the new file (psr.asl) to an ACPI table format. Here is an example of a customized _SB._AC._PSR method, </p>
<p> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; DefinitionBlock (“”, “SSDT”, 1, “”, “”, 0x20080715) </p>
<p> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; { External (ACON) </p>
<p> Method (_SB_.AC._PSR, 0, NotSerialized) </p>
<p> { Store (“In AC _PSR”, Debug) </p>
<p> Return (ACON) } } </p>
<p> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Note that the full pathname of the method in ACPI namespace </p>
<p> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; should be used. </p>
<p> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; And remember to use “External” to declare external objects. e) assemble the file to generate the AML code of the method. e.g. “iasl psr.asl” (psr.aml is generated as a result) f) mount debugfs by “mount -t debugfs none /sys/kernel/debug” </p>
<p> &nbsp;&nbsp; g) override the old method via the debugfs by running “cat /tmp/psr.aml &gt; /sys/kernel/debug/acpi/custom_method” </p>
<p> 2. insert a new method This is easier than overriding an existing method. </p>
<p> &nbsp;&nbsp; We just need to create the ASL code of the method we want to </p>
<p> &nbsp;&nbsp; insert and then follow the step c) ~ g) in section 1. </p>
<p> 3. undo your changes The “undo” operation is not supported for a new inserted method </p>
<p> &nbsp;&nbsp; right now, i.e. we can not remove a method currently. </p>
<p> &nbsp;&nbsp; For an overrided method, in order to undo your changes, please </p>
<p> &nbsp;&nbsp; save a copy of the method original ASL code in step c) section 1, </p>
<p> &nbsp;&nbsp; and redo step c) ~ g) to override the method with the original one. </p>
<p> Note: We can use a kernel with multiple custom ACPI method running, But each individual write to debugfs can implement a SINGLE </p>
<p> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; method override. i.e. if we want to insert/override multiple </p>
<p> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ACPI methods, we need to redo step c) ~ g) for multiple times. </p>
<p> Note: Be aware that root can mis-use this driver to modify arbitrary memory and gain additional rights, if root’s privileges got </p>
<p> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; restricted (for example if root is not allowed to load additional modules after boot). </p>
<p> /sys/module/acpi/parameters/: </p>
<p> trace_method_name The AML method name that the user wants to trace </p>
<p> trace_debug_layer The temporary debug_layer used when tracing the method. </p>
<p> Using 0xffffffff by default if it is 0. </p>
<p> trace_debug_level The temporary debug_level used when tracing the method. </p>
<p> Using 0x00ffffff by default if it is 0. </p>
<p> trace_state The status of the tracing feature. </p>
<p> “enabled” means this feature is enabled </p>
<p> and the AML method is traced every time it’s executed. </p>
<p> “1” means this feature is enabled and the AML method </p>
<p> will only be traced during the next execution. </p>
<p> “disabled” means this feature is disabled. </p>
<p> Users can enable/disable this debug tracing feature by </p>
<p> “echo string &gt; /sys/module/acpi/parameters/trace_state”. </p>
<p> “string” should be one of “enable”, “disable” and “1”. </p>
<p><div><br> <strong>ACPI Debug Output</strong><br></div> The ACPI CA, the Linux ACPI core, and some ACPI drivers can generate debug output.&nbsp; This document describes how to use this facility. </p>
<p> Compile-time configuration </p>
<hr>
<p> ACPI debug output is globally enabled by CONFIG_ACPI_DEBUG.&nbsp; If this config option is turned off, the debug messages are not even built into the kernel. </p>
<p> Boot- and run-time configuration </p>
<hr>
<p> When CONFIG_ACPI_DEBUG=y, you can select the component and level of messages you’re interested in.&nbsp; At boot-time, use the acpi.debug_layer and acpi.debug_level kernel command line options.&nbsp; After boot, you can use the debug_layer and debug_level files in /sys/module/acpi/parameters/ to control the debug messages. </p>
<p> debug_layer (component) </p>
<hr>
<p> The “debug_layer” is a mask that selects components of interest, e.g., a specific driver or part of the ACPI interpreter.&nbsp; To build the debug_layer bitmask, look for the “#define _COMPONENT” in an ACPI source file. </p>
<p> You can set the debug_layer mask at boot-time using the acpi.debug_layer command line argument, and you can change it after boot by writing values to /sys/module/acpi/parameters/debug_layer. </p>
<p> The possible components are defined in include/acpi/acoutput.h and include/acpi/acpi_drivers.h.&nbsp; Reading /sys/module/acpi/parameters/debug_layer shows the supported mask values, currently these: </p>
<p> &nbsp;&nbsp;&nbsp; ACPI_UTILITIES&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x00000001 </p>
<p> &nbsp;&nbsp;&nbsp; ACPI_HARDWARE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x00000002 </p>
<p> &nbsp;&nbsp;&nbsp; ACPI_EVENTS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x00000004 </p>
<p> &nbsp;&nbsp;&nbsp; ACPI_TABLES&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x00000008 </p>
<p> &nbsp;&nbsp;&nbsp; ACPI_NAMESPACE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x00000010 </p>
<p> &nbsp;&nbsp;&nbsp; ACPI_PARSER&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x00000020 </p>
<p> &nbsp;&nbsp;&nbsp; ACPI_DISPATCHER&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x00000040 </p>
<p> &nbsp;&nbsp;&nbsp; ACPI_EXECUTER&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x00000080 </p>
<p> &nbsp;&nbsp;&nbsp; ACPI_RESOURCES&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x00000100 </p>
<p> &nbsp;&nbsp;&nbsp; ACPI_CA_DEBUGGER&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x00000200 </p>
<p> &nbsp;&nbsp;&nbsp; ACPI_OS_SERVICES&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x00000400 </p>
<p> &nbsp;&nbsp;&nbsp; ACPI_CA_DISASSEMBLER&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x00000800 </p>
<p> &nbsp;&nbsp;&nbsp; ACPI_COMPILER&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x00001000 </p>
<p> &nbsp;&nbsp;&nbsp; ACPI_TOOLS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x00002000 </p>
<p> &nbsp;&nbsp;&nbsp; ACPI_BUS_COMPONENT&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x00010000 </p>
<p> &nbsp;&nbsp;&nbsp; ACPI_AC_COMPONENT&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x00020000 </p>
<p> &nbsp;&nbsp;&nbsp; ACPI_BATTERY_COMPONENT&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x00040000 </p>
<p> &nbsp;&nbsp;&nbsp; ACPI_BUTTON_COMPONENT&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x00080000 </p>
<p> &nbsp;&nbsp;&nbsp; ACPI_SBS_COMPONENT&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x00100000 </p>
<p> &nbsp;&nbsp;&nbsp; ACPI_FAN_COMPONENT&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x00200000 </p>
<p> &nbsp;&nbsp;&nbsp; ACPI_PCI_COMPONENT&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x00400000 </p>
<p> &nbsp;&nbsp;&nbsp; ACPI_POWER_COMPONENT&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x00800000 </p>
<p> &nbsp;&nbsp;&nbsp; ACPI_CONTAINER_COMPONENT&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x01000000 </p>
<p> &nbsp;&nbsp;&nbsp; ACPI_SYSTEM_COMPONENT&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x02000000 </p>
<p> &nbsp;&nbsp;&nbsp; ACPI_THERMAL_COMPONENT&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x04000000 ACPI_MEMORY_DEVICE_COMPONENT&nbsp;&nbsp;&nbsp; 0x08000000 </p>
<p> &nbsp;&nbsp;&nbsp; ACPI_VIDEO_COMPONENT&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x10000000 </p>
<p> &nbsp;&nbsp;&nbsp; ACPI_PROCESSOR_COMPONENT&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x20000000 </p>
<p> debug_level </p>
<hr>
<p> The “debug_level” is a mask that selects different types of messages, e.g., those related to initialization, method execution, informational messages, etc. To build debug_level, look at the level specified in an ACPI_DEBUG_PRINT() statement. </p>
<p> The ACPI interpreter uses several different levels, but the Linux ACPI core and ACPI drivers generally only use ACPI_LV_INFO. </p>
<p> You can set the debug_level mask at boot-time using the acpi.debug_level command line argument, and you can change it after boot by writing values to /sys/module/acpi/parameters/debug_level. </p>
<p> The possible levels are defined in include/acpi/acoutput.h.&nbsp; Reading /sys/module/acpi/parameters/debug_level shows the supported mask values, currently these: </p>
<p> &nbsp;&nbsp;&nbsp; ACPI_LV_INIT&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x00000001 </p>
<p> &nbsp;&nbsp;&nbsp; ACPI_LV_DEBUG_OBJECT&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x00000002 </p>
<p> &nbsp;&nbsp;&nbsp; ACPI_LV_INFO&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x00000004 </p>
<p> &nbsp;&nbsp;&nbsp; ACPI_LV_INIT_NAMES&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x00000020 </p>
<p> &nbsp;&nbsp;&nbsp; ACPI_LV_PARSE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x00000040 </p>
<p> &nbsp;&nbsp;&nbsp; ACPI_LV_LOAD&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x00000080 </p>
<p> &nbsp;&nbsp;&nbsp; ACPI_LV_DISPATCH&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x00000100 </p>
<p> &nbsp;&nbsp;&nbsp; ACPI_LV_EXEC&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x00000200 </p>
<p> &nbsp;&nbsp;&nbsp; ACPI_LV_NAMES&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x00000400 </p>
<p> &nbsp;&nbsp;&nbsp; ACPI_LV_OPREGION&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x00000800 </p>
<p> &nbsp;&nbsp;&nbsp; ACPI_LV_BFIELD&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x00001000 </p>
<p> &nbsp;&nbsp;&nbsp; ACPI_LV_TABLES&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x00002000 </p>
<p> &nbsp;&nbsp;&nbsp; ACPI_LV_VALUES&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x00004000 </p>
<p> &nbsp;&nbsp;&nbsp; ACPI_LV_OBJECTS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x00008000 </p>
<p> &nbsp;&nbsp;&nbsp; ACPI_LV_RESOURCES&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x00010000 </p>
<p> &nbsp;&nbsp;&nbsp; ACPI_LV_USER_REQUESTS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x00020000 </p>
<p> &nbsp;&nbsp;&nbsp; ACPI_LV_PACKAGE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x00040000 </p>
<p> &nbsp;&nbsp;&nbsp; ACPI_LV_ALLOCATIONS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x00100000 </p>
<p> &nbsp;&nbsp;&nbsp; ACPI_LV_FUNCTIONS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x00200000 </p>
<p> &nbsp;&nbsp;&nbsp; ACPI_LV_OPTIMIZATIONS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x00400000 </p>
<p> &nbsp;&nbsp;&nbsp; ACPI_LV_MUTEX&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x01000000 </p>
<p> &nbsp;&nbsp;&nbsp; ACPI_LV_THREADS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x02000000 </p>
<p> &nbsp;&nbsp;&nbsp; ACPI_LV_IO&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x04000000 </p>
<p> &nbsp;&nbsp;&nbsp; ACPI_LV_INTERRUPTS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x08000000 </p>
<p> &nbsp;&nbsp;&nbsp; ACPI_LV_AML_DISASSEMBLE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x10000000 </p>
<p> &nbsp;&nbsp;&nbsp; ACPI_LV_VERBOSE_INFO&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x20000000 </p>
<p> &nbsp;&nbsp;&nbsp; ACPI_LV_FULL_TABLES&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x40000000 </p>
<p> &nbsp;&nbsp;&nbsp; ACPI_LV_EVENTS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0x80000000 </p>
<p> Examples </p>
<hr>
<p> For example, drivers/acpi/bus.c contains this: </p>
<p> &nbsp;&nbsp;&nbsp; #define _COMPONENT&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ACPI_BUS_COMPONENT </p>
<p> &nbsp;&nbsp;&nbsp; … </p>
<p> &nbsp;&nbsp;&nbsp; ACPI_DEBUG_PRINT((ACPI_DB_INFO, “Device insertion detected\n”)); </p>
<p> To turn on this message, set the ACPI_BUS_COMPONENT bit in acpi.debug_layer and the ACPI_LV_INFO bit in acpi.debug_level.&nbsp; (The ACPI_DEBUG_PRINT statement uses ACPI_DB_INFO, which is macro based on the ACPI_LV_INFO definition.) </p>
<p> Enable all AML “Debug” output (stores to the Debug object while interpreting AML) during boot: </p>
<p> &nbsp;&nbsp;&nbsp; acpi.debug_layer=0xffffffff acpi.debug_level=0x2 </p>
<p> Enable PCI and PCI interrupt routing debug messages: </p>
<p> &nbsp;&nbsp;&nbsp; acpi.debug_layer=0x400000 acpi.debug_level=0x4 </p>
<p> Enable all ACPI hardware-related messages: </p>
<p> &nbsp;&nbsp;&nbsp; acpi.debug_layer=0x2 acpi.debug_level=0xffffffff </p>
<p> Enable all ACPI_DB_INFO messages after boot: </p>
<p> &nbsp;&nbsp;&nbsp; # echo 0x4 &gt; /sys/module/acpi/parameters/debug_level </p>
<p> Show all valid component values: </p>
<p> &nbsp;&nbsp;&nbsp; # cat /sys/module/acpi/parameters/debug_layer </p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://fengguoqing.github.io/2013/01/12/ACPI-DEBUG方法/" data-id="cjafig59e0000qrj18dptc3wm" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/功耗/">功耗</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2013/01/13/how-to-install-PostgreSQL-on-ubuntu/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          how to install PostgreSQL on ubuntu
        
      </div>
    </a>
  
  
    <a href="/2013/01/12/mini2440基于uboot的TFTP下载教程/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">mini2440基于uboot的TFTP下载教程</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux内核调试/">Linux内核调试</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux移植/">linux移植</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/功耗/">功耗</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/教程/">教程</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/日常记录/">日常记录</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/系统安全/">系统安全</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Linux内核调试/" style="font-size: 10px;">Linux内核调试</a> <a href="/tags/linux移植/" style="font-size: 15px;">linux移植</a> <a href="/tags/功耗/" style="font-size: 15px;">功耗</a> <a href="/tags/教程/" style="font-size: 20px;">教程</a> <a href="/tags/日常记录/" style="font-size: 15px;">日常记录</a> <a href="/tags/系统安全/" style="font-size: 15px;">系统安全</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">November 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/04/">April 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/02/">February 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/01/">January 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/12/">December 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/11/">November 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/08/">August 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/06/">June 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/03/">March 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/02/">February 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/01/">January 2013</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2017/11/25/hello-world/">Hello World</a>
          </li>
        
          <li>
            <a href="/2014/04/20/在ubuntu上安装redmine/">在ubuntu上安装redmine</a>
          </li>
        
          <li>
            <a href="/2014/04/14/Linux-kernel-make-menuconfig-时出错处理方法/">Linux kernel make menuconfig 时出错处理方法</a>
          </li>
        
          <li>
            <a href="/2014/02/15/解决三星手机WIFI“此网络不可用。证书已到期”方法/">解决三星手机WIFI“此网络不可用。证书已到期”方法</a>
          </li>
        
          <li>
            <a href="/2014/01/19/某些TP-Link路由器可以被远程获取密码/">某些TP-Link路由器可以被远程获取密码</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2017 Frank Feng<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>